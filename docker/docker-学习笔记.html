<!DOCTYPE html>












  


<html class="theme-next mist use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">






















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.2.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.2.0">


  <link rel="mask-icon" href="/images/logo.svg?v=7.2.0" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '7.2.0',
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>


  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})
  (window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/af1c402f.js","daovoice")
  daovoice('init', {
    app_id: "af1c402f"});
  daovoice('update');
  </script>

  <meta name="description" content="Docker简介Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。 Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。 容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。">
<meta name="keywords" content="docker">
<meta property="og:type" content="article">
<meta property="og:title" content="docker 学习笔记">
<meta property="og:url" content="https://forgetst.github.io/docker/docker-学习笔记.html">
<meta property="og:site_name" content="勿忘，须舍">
<meta property="og:description" content="Docker简介Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。 Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。 容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1608478080832&di=90391cf6308f317e82d5287e38f7f0c4&imgtype=0&src=http%3A%2F%2Faliyunzixunbucket.oss-cn-beijing.aliyuncs.com%2Fpng%2Fcb2fe2ff6c9271d33c2073101e8f6e96.png%3Fx-oss-process%3Dimage%2Fresize%2Cp_100%2Fauto-orient%2C1%2Fquality%2Cq_90%2Fformat%2Cjpg%2Fwatermark%2Cimage_eXVuY2VzaGk%3D%2Ct_100">
<meta property="og:updated_time" content="2020-12-20T16:00:00.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="docker 学习笔记">
<meta name="twitter:description" content="Docker简介Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。 Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。 容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。">
<meta name="twitter:image" content="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1608478080832&di=90391cf6308f317e82d5287e38f7f0c4&imgtype=0&src=http%3A%2F%2Faliyunzixunbucket.oss-cn-beijing.aliyuncs.com%2Fpng%2Fcb2fe2ff6c9271d33c2073101e8f6e96.png%3Fx-oss-process%3Dimage%2Fresize%2Cp_100%2Fauto-orient%2C1%2Fquality%2Cq_90%2Fformat%2Cjpg%2Fwatermark%2Cimage_eXVuY2VzaGk%3D%2Ct_100">



  <link rel="alternate" href="/atom.xml" title="勿忘，须舍" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://forgetst.github.io/docker/docker-学习笔记">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  
  <title>docker 学习笔记 | 勿忘，须舍</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-right page-post-detail">
    <div class="headband"></div>

    <a href="https://github.com/forgetST" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"/><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"/><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
  
    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">勿忘，须舍</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-python">

    
    
      
    

    

    <a href="/categories/python/" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br>python 随记</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  
    

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://forgetst.github.io/docker/docker-学习笔记.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr Wang">
      <meta itemprop="description" content="行动了才会有故事，说出来才会有结果。">
      <meta itemprop="image" content="/images/profile.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="勿忘，须舍">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">docker 学习笔记

              
            
          </h1>
        

        <div class="post-meta">

          
          
          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2020-12-21 00:00" itemprop="dateCreated datePublished" datetime="2020-12-21T00:00:00+08:00">2020-12-21</time>
            </span>
          

          

          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/docker/" itemprop="url" rel="index"><span itemprop="name">docker</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          <br>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="Docker简介"><a href="#Docker简介" class="headerlink" title="Docker简介"></a>Docker简介</h2><p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。</p>
<p>Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p>
<p>容器是完全使用沙箱机制，相互之间不会有任何接口（类似 iPhone 的 app）,更重要的是容器性能开销极低。</p>
<a id="more"></a>

<blockquote>
<p><strong>Docker的应用场景</strong></p>
</blockquote>
<ul>
<li>Web 应用的自动化打包和发布。</li>
<li>自动化测试和持续集成、发布。</li>
<li>在服务型环境中部署和调整数据库或其他的后台应用。</li>
<li>从头编译或者扩展现有的 OpenShift 或 Cloud Foundry 平台来搭建自己的 PaaS 环境。</li>
</ul>
<blockquote>
<p><strong>Docker 的优点</strong></p>
</blockquote>
<ul>
<li>快速，一致地交付您的应用程序</li>
<li>响应式部署和扩展</li>
<li>在同一硬件上运行更多工作负载</li>
</ul>
<p>Docker 官网：<a href="https://www.docker.com/" target="_blank" rel="noopener">https://www.docker.com</a></p>
<p>Github Docker 源码：<a href="https://github.com/docker/docker-ce" target="_blank" rel="noopener">https://github.com/docker/docker-ce</a></p>
<h2 id="Docker架构"><a href="#Docker架构" class="headerlink" title="Docker架构"></a>Docker架构</h2><p><img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1608478080832&di=90391cf6308f317e82d5287e38f7f0c4&imgtype=0&src=http%3A%2F%2Faliyunzixunbucket.oss-cn-beijing.aliyuncs.com%2Fpng%2Fcb2fe2ff6c9271d33c2073101e8f6e96.png%3Fx-oss-process%3Dimage%2Fresize%2Cp_100%2Fauto-orient%2C1%2Fquality%2Cq_90%2Fformat%2Cjpg%2Fwatermark%2Cimage_eXVuY2VzaGk%3D%2Ct_100" alt="img">Docker 包括三个基本概念:</p>
<ul>
<li><strong>镜像（Image）</strong>：Docker 镜像（Image），就相当于是一个 root 文件系统。比如官方镜像 ubuntu:16.04 就包含了完整的一套 Ubuntu16.04 最小系统的 root 文件系统。</li>
<li><strong>容器（Container）</strong>：镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。</li>
<li><strong>仓库（Repository）</strong>：仓库可看成一个代码控制中心，用来保存镜像。</li>
</ul>
<p>Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。</p>
<p>Docker 容器通过 Docker 镜像来创建。</p>
<p>容器与镜像的关系类似于面向对象编程中的对象与类。</p>
<h2 id="Docker-安装"><a href="#Docker-安装" class="headerlink" title="Docker 安装"></a>Docker 安装</h2><p><a href="https://www.runoob.com/docker/ubuntu-docker-install.html" target="_blank" rel="noopener">Ubuntu Docker 安装</a></p>
<p><a href="https://www.runoob.com/docker/centos-docker-install.html" target="_blank" rel="noopener">CentOS Docker 安装</a></p>
<p><a href="https://www.runoob.com/docker/docker-mirror-acceleration.html" target="_blank" rel="noopener">Docker 镜像加速</a></p>
<p>阿里镜像加速</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">mkdir</span> -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</span><br><span class="line">&#123;</span><br><span class="line">  "registry-mirrors": ["https://rnjrwkn6.mirror.aliyuncs.com"]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br></pre></td></tr></table></figure>

<h2 id="Docker常用命令"><a href="#Docker常用命令" class="headerlink" title="Docker常用命令"></a>Docker常用命令</h2><p>官网：<a href="https://docs.docker.com/engine/reference/run/" target="_blank" rel="noopener">https://docs.docker.com/engine/reference/run/</a></p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker -h</span><br><span class="line">Flag shorthand -h has been deprecated, please use --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> [<span class="title">OPTIONS</span>] <span class="title">COMMAND</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">A</span> <span class="title">self</span>-<span class="title">sufficient</span> <span class="title">runtime</span> <span class="title">for</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">config</span> <span class="title">string</span>      <span class="title">Location</span> <span class="title">of</span> <span class="title">client</span> <span class="title">config</span> <span class="title">files</span> (<span class="title">default</span> "/<span class="title">root</span>/.<span class="title">docker</span>")</span></span><br><span class="line"><span class="function">  -<span class="title">c</span>, --<span class="title">context</span> <span class="title">string</span>     <span class="title">Name</span> <span class="title">of</span> <span class="title">the</span> <span class="title">context</span> <span class="title">to</span> <span class="title">use</span> <span class="title">to</span> <span class="title">connect</span> <span class="title">to</span> <span class="title">the</span> <span class="title">daemon</span> (<span class="title">overrides</span> <span class="title">DOCKER_HOST</span> <span class="title">env</span> <span class="title">var</span> <span class="title">and</span></span></span><br><span class="line"><span class="function">                           <span class="title">default</span> <span class="title">context</span> <span class="title">set</span> <span class="title">with</span> "<span class="title">docker</span> <span class="title">context</span> <span class="title">use</span>")</span></span><br><span class="line"><span class="function">  -<span class="title">D</span>, --<span class="title">debug</span>              <span class="title">Enable</span> <span class="title">debug</span> <span class="title">mode</span></span></span><br><span class="line"><span class="function">  -<span class="title">H</span>, --<span class="title">host</span> <span class="title">list</span>          <span class="title">Daemon</span> <span class="title">socket</span>(<span class="title">s</span>) <span class="title">to</span> <span class="title">connect</span> <span class="title">to</span></span></span><br><span class="line"><span class="function">  -<span class="title">l</span>, --<span class="title">log</span>-<span class="title">level</span> <span class="title">string</span>   <span class="title">Set</span> <span class="title">the</span> <span class="title">logging</span> <span class="title">level</span> ("<span class="title">debug</span>"|"<span class="title">info</span>"|"<span class="title">warn</span>"|"<span class="title">error</span>"|"<span class="title">fatal</span>") (<span class="title">default</span> "<span class="title">info</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">tls</span>                <span class="title">Use</span> <span class="title">TLS</span>; <span class="title">implied</span> <span class="title">by</span> --<span class="title">tlsverify</span></span></span><br><span class="line"><span class="function">      --<span class="title">tlscacert</span> <span class="title">string</span>   <span class="title">Trust</span> <span class="title">certs</span> <span class="title">signed</span> <span class="title">only</span> <span class="title">by</span> <span class="title">this</span> <span class="title">CA</span> (<span class="title">default</span> "/<span class="title">root</span>/.<span class="title">docker</span>/<span class="title">ca.pem</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">tlscert</span> <span class="title">string</span>     <span class="title">Path</span> <span class="title">to</span> <span class="title">TLS</span> <span class="title">certificate</span> <span class="title">file</span> (<span class="title">default</span> "/<span class="title">root</span>/.<span class="title">docker</span>/<span class="title">cert.pem</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">tlskey</span> <span class="title">string</span>      <span class="title">Path</span> <span class="title">to</span> <span class="title">TLS</span> <span class="title">key</span> <span class="title">file</span> (<span class="title">default</span> "/<span class="title">root</span>/.<span class="title">docker</span>/<span class="title">key.pem</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">tlsverify</span>          <span class="title">Use</span> <span class="title">TLS</span> <span class="title">and</span> <span class="title">verify</span> <span class="title">the</span> <span class="title">remote</span></span></span><br><span class="line"><span class="function">  -<span class="title">v</span>, --<span class="title">version</span>            <span class="title">Print</span> <span class="title">version</span> <span class="title">information</span> <span class="title">and</span> <span class="title">quit</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Management</span> <span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">builder</span>     <span class="title">Manage</span> <span class="title">builds</span></span></span><br><span class="line"><span class="function">  <span class="title">config</span>      <span class="title">Manage</span> <span class="title">Docker</span> <span class="title">configs</span></span></span><br><span class="line"><span class="function">  <span class="title">container</span>   <span class="title">Manage</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">context</span>     <span class="title">Manage</span> <span class="title">contexts</span></span></span><br><span class="line"><span class="function">  <span class="title">engine</span>      <span class="title">Manage</span> <span class="title">the</span> <span class="title">docker</span> <span class="title">engine</span></span></span><br><span class="line"><span class="function">  <span class="title">image</span>       <span class="title">Manage</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">network</span>     <span class="title">Manage</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function">  <span class="title">node</span>        <span class="title">Manage</span> <span class="title">Swarm</span> <span class="title">nodes</span></span></span><br><span class="line"><span class="function">  <span class="title">plugin</span>      <span class="title">Manage</span> <span class="title">plugins</span></span></span><br><span class="line"><span class="function">  <span class="title">secret</span>      <span class="title">Manage</span> <span class="title">Docker</span> <span class="title">secrets</span></span></span><br><span class="line"><span class="function">  <span class="title">service</span>     <span class="title">Manage</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">stack</span>       <span class="title">Manage</span> <span class="title">Docker</span> <span class="title">stacks</span></span></span><br><span class="line"><span class="function">  <span class="title">swarm</span>       <span class="title">Manage</span> <span class="title">Swarm</span></span></span><br><span class="line"><span class="function">  <span class="title">system</span>      <span class="title">Manage</span> <span class="title">Docker</span></span></span><br><span class="line"><span class="function">  <span class="title">trust</span>       <span class="title">Manage</span> <span class="title">trust</span> <span class="title">on</span> <span class="title">Docker</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">volume</span>      <span class="title">Manage</span> <span class="title">volumes</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">attach</span>      <span class="title">Attach</span> <span class="title">local</span> <span class="title">standard</span> <span class="title">input</span>, <span class="title">output</span>, <span class="title">and</span> <span class="title">error</span> <span class="title">streams</span> <span class="title">to</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">build</span>       <span class="title">Build</span> <span class="title">an</span> <span class="title">image</span> <span class="title">from</span> <span class="title">a</span> <span class="title">Dockerfile</span></span></span><br><span class="line"><span class="function">  <span class="title">commit</span>      <span class="title">Create</span> <span class="title">a</span> <span class="title">new</span> <span class="title">image</span> <span class="title">from</span> <span class="title">a</span> <span class="title">container</span>'<span class="title">s</span> <span class="title">changes</span></span></span><br><span class="line"><span class="function">  <span class="title">cp</span>          <span class="title">Copy</span> <span class="title">files</span>/<span class="title">folders</span> <span class="title">between</span> <span class="title">a</span> <span class="title">container</span> <span class="title">and</span> <span class="title">the</span> <span class="title">local</span> <span class="title">filesystem</span></span></span><br><span class="line"><span class="function">  <span class="title">create</span>      <span class="title">Create</span> <span class="title">a</span> <span class="title">new</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">diff</span>        <span class="title">Inspect</span> <span class="title">changes</span> <span class="title">to</span> <span class="title">files</span> <span class="title">or</span> <span class="title">directories</span> <span class="title">on</span> <span class="title">a</span> <span class="title">container</span>'<span class="title">s</span> <span class="title">filesystem</span></span></span><br><span class="line"><span class="function">  <span class="title">events</span>      <span class="title">Get</span> <span class="title">real</span> <span class="title">time</span> <span class="title">events</span> <span class="title">from</span> <span class="title">the</span> <span class="title">server</span></span></span><br><span class="line"><span class="function">  <span class="title">exec</span>        <span class="title">Run</span> <span class="title">a</span> <span class="title">command</span> <span class="title">in</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">export</span>      <span class="title">Export</span> <span class="title">a</span> <span class="title">container</span>'<span class="title">s</span> <span class="title">filesystem</span> <span class="title">as</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span></span></span><br><span class="line"><span class="function">  <span class="title">history</span>     <span class="title">Show</span> <span class="title">the</span> <span class="title">history</span> <span class="title">of</span> <span class="title">an</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  <span class="title">images</span>      <span class="title">List</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">import</span>      <span class="title">Import</span> <span class="title">the</span> <span class="title">contents</span> <span class="title">from</span> <span class="title">a</span> <span class="title">tarball</span> <span class="title">to</span> <span class="title">create</span> <span class="title">a</span> <span class="title">filesystem</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  <span class="title">info</span>        <span class="title">Display</span> <span class="title">system</span>-<span class="title">wide</span> <span class="title">information</span></span></span><br><span class="line"><span class="function">  <span class="title">inspect</span>     <span class="title">Return</span> <span class="title">low</span>-<span class="title">level</span> <span class="title">information</span> <span class="title">on</span> <span class="title">Docker</span> <span class="title">objects</span></span></span><br><span class="line"><span class="function">  <span class="title">kill</span>        <span class="title">Kill</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">running</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">load</span>        <span class="title">Load</span> <span class="title">an</span> <span class="title">image</span> <span class="title">from</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span> <span class="title">or</span> <span class="title">STDIN</span></span></span><br><span class="line"><span class="function">  <span class="title">login</span>       <span class="title">Log</span> <span class="title">in</span> <span class="title">to</span> <span class="title">a</span> <span class="title">Docker</span> <span class="title">registry</span></span></span><br><span class="line"><span class="function">  <span class="title">logout</span>      <span class="title">Log</span> <span class="title">out</span> <span class="title">from</span> <span class="title">a</span> <span class="title">Docker</span> <span class="title">registry</span></span></span><br><span class="line"><span class="function">  <span class="title">logs</span>        <span class="title">Fetch</span> <span class="title">the</span> <span class="title">logs</span> <span class="title">of</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">pause</span>       <span class="title">Pause</span> <span class="title">all</span> <span class="title">processes</span> <span class="title">within</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">port</span>        <span class="title">List</span> <span class="title">port</span> <span class="title">mappings</span> <span class="title">or</span> <span class="title">a</span> <span class="title">specific</span> <span class="title">mapping</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">ps</span>          <span class="title">List</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">pull</span>        <span class="title">Pull</span> <span class="title">an</span> <span class="title">image</span> <span class="title">or</span> <span class="title">a</span> <span class="title">repository</span> <span class="title">from</span> <span class="title">a</span> <span class="title">registry</span></span></span><br><span class="line"><span class="function">  <span class="title">push</span>        <span class="title">Push</span> <span class="title">an</span> <span class="title">image</span> <span class="title">or</span> <span class="title">a</span> <span class="title">repository</span> <span class="title">to</span> <span class="title">a</span> <span class="title">registry</span></span></span><br><span class="line"><span class="function">  <span class="title">rename</span>      <span class="title">Rename</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">restart</span>     <span class="title">Restart</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">rm</span>          <span class="title">Remove</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">rmi</span>         <span class="title">Remove</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">run</span>         <span class="title">Run</span> <span class="title">a</span> <span class="title">command</span> <span class="title">in</span> <span class="title">a</span> <span class="title">new</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">save</span>        <span class="title">Save</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">images</span> <span class="title">to</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span> (<span class="title">streamed</span> <span class="title">to</span> <span class="title">STDOUT</span> <span class="title">by</span> <span class="title">default</span>)</span></span><br><span class="line"><span class="function">  <span class="title">search</span>      <span class="title">Search</span> <span class="title">the</span> <span class="title">Docker</span> <span class="title">Hub</span> <span class="title">for</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">start</span>       <span class="title">Start</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">stopped</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">stats</span>       <span class="title">Display</span> <span class="title">a</span> <span class="title">live</span> <span class="title">stream</span> <span class="title">of</span> <span class="title">container</span>(<span class="title">s</span>) <span class="title">resource</span> <span class="title">usage</span> <span class="title">statistics</span></span></span><br><span class="line"><span class="function">  <span class="title">stop</span>        <span class="title">Stop</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">running</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">tag</span>         <span class="title">Create</span> <span class="title">a</span> <span class="title">tag</span> <span class="title">TARGET_IMAGE</span> <span class="title">that</span> <span class="title">refers</span> <span class="title">to</span> <span class="title">SOURCE_IMAGE</span></span></span><br><span class="line"><span class="function">  <span class="title">top</span>         <span class="title">Display</span> <span class="title">the</span> <span class="title">running</span> <span class="title">processes</span> <span class="title">of</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">unpause</span>     <span class="title">Unpause</span> <span class="title">all</span> <span class="title">processes</span> <span class="title">within</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">update</span>      <span class="title">Update</span> <span class="title">configuration</span> <span class="title">of</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">version</span>     <span class="title">Show</span> <span class="title">the</span> <span class="title">Docker</span> <span class="title">version</span> <span class="title">information</span></span></span><br><span class="line"><span class="function">  <span class="title">wait</span>        <span class="title">Block</span> <span class="title">until</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span> <span class="title">stop</span>, <span class="title">then</span> <span class="title">print</span> <span class="title">their</span> <span class="title">exit</span> <span class="title">codes</span></span></span><br></pre></td></tr></table></figure>

<h3 id="镜像相关的命令"><a href="#镜像相关的命令" class="headerlink" title="镜像相关的命令"></a>镜像相关的命令</h3><h4 id="创建镜像-docker-build-t-lt-imageName-tag-gt-f-path-to-dockerfile"><a href="#创建镜像-docker-build-t-lt-imageName-tag-gt-f-path-to-dockerfile" class="headerlink" title="创建镜像 docker build -t &lt;imageName:tag&gt; -f /path/to/dockerfile ."></a>创建镜像 <code>docker build -t &lt;imageName:tag&gt; -f /path/to/dockerfile .</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap compose_test]# docker build --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage: <span class="title">docker</span> <span class="title">build</span> [<span class="title">OPTIONS</span>] <span class="title">PATH</span> | <span class="title">URL</span> | -</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Build</span> <span class="title">an</span> <span class="title">image</span> <span class="title">from</span> <span class="title">a</span> <span class="title">Dockerfile</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">add</span>-<span class="title">host</span> <span class="title">list</span>           <span class="title">Add</span> <span class="title">a</span> <span class="title">custom</span> <span class="title">host</span>-<span class="title">to</span>-<span class="title">IP</span> <span class="title">mapping</span> (<span class="title">host:ip</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">build</span>-<span class="title">arg</span> <span class="title">list</span>          <span class="title">Set</span> <span class="title">build</span>-<span class="title">time</span> <span class="title">variables</span></span></span><br><span class="line"><span class="function">      --<span class="title">cache</span>-<span class="title">from</span> <span class="title">strings</span>      <span class="title">Images</span> <span class="title">to</span> <span class="title">consider</span> <span class="title">as</span> <span class="title">cache</span> <span class="title">sources</span></span></span><br><span class="line"><span class="function">      --<span class="title">cgroup</span>-<span class="title">parent</span> <span class="title">string</span>    <span class="title">Optional</span> <span class="title">parent</span> <span class="title">cgroup</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">compress</span>                <span class="title">Compress</span> <span class="title">the</span> <span class="title">build</span> <span class="title">context</span> <span class="title">using</span> <span class="title">gzip</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpu</span>-<span class="title">period</span> <span class="title">int</span>          <span class="title">Limit</span> <span class="title">the</span> <span class="title">CPU</span> <span class="title">CFS</span> (<span class="title">Completely</span> <span class="title">Fair</span> <span class="title">Scheduler</span>) <span class="title">period</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpu</span>-<span class="title">quota</span> <span class="title">int</span>           <span class="title">Limit</span> <span class="title">the</span> <span class="title">CPU</span> <span class="title">CFS</span> (<span class="title">Completely</span> <span class="title">Fair</span> <span class="title">Scheduler</span>) <span class="title">quota</span></span></span><br><span class="line"><span class="function">  -<span class="title">c</span>, --<span class="title">cpu</span>-<span class="title">shares</span> <span class="title">int</span>          <span class="title">CPU</span> <span class="title">shares</span> (<span class="title">relative</span> <span class="title">weight</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">cpuset</span>-<span class="title">cpus</span> <span class="title">string</span>      <span class="title">CPUs</span> <span class="title">in</span> <span class="title">which</span> <span class="title">to</span> <span class="title">allow</span> <span class="title">execution</span> (0-3, 0,1)</span></span><br><span class="line"><span class="function">      --<span class="title">cpuset</span>-<span class="title">mems</span> <span class="title">string</span>      <span class="title">MEMs</span> <span class="title">in</span> <span class="title">which</span> <span class="title">to</span> <span class="title">allow</span> <span class="title">execution</span> (0-3, 0,1)</span></span><br><span class="line"><span class="function">      --<span class="title">disable</span>-<span class="title">content</span>-<span class="title">trust</span>   <span class="title">Skip</span> <span class="title">image</span> <span class="title">verification</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">file</span> <span class="title">string</span>             <span class="title">Name</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Dockerfile</span> (<span class="title">Default</span> <span class="title">is</span> '<span class="title">PATH</span>/<span class="title">Dockerfile</span>')</span></span><br><span class="line"><span class="function">      --<span class="title">force</span>-<span class="title">rm</span>                <span class="title">Always</span> <span class="title">remove</span> <span class="title">intermediate</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">      --<span class="title">iidfile</span> <span class="title">string</span>          <span class="title">Write</span> <span class="title">the</span> <span class="title">image</span> <span class="title">ID</span> <span class="title">to</span> <span class="title">the</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">      --<span class="title">isolation</span> <span class="title">string</span>        <span class="title">Container</span> <span class="title">isolation</span> <span class="title">technology</span></span></span><br><span class="line"><span class="function">      --<span class="title">label</span> <span class="title">list</span>              <span class="title">Set</span> <span class="title">metadata</span> <span class="title">for</span> <span class="title">an</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  -<span class="title">m</span>, --<span class="title">memory</span> <span class="title">bytes</span>            <span class="title">Memory</span> <span class="title">limit</span></span></span><br><span class="line"><span class="function">      --<span class="title">memory</span>-<span class="title">swap</span> <span class="title">bytes</span>       <span class="title">Swap</span> <span class="title">limit</span> <span class="title">equal</span> <span class="title">to</span> <span class="title">memory</span> <span class="title">plus</span> <span class="title">swap</span>: '-1' <span class="title">to</span> <span class="title">enable</span> <span class="title">unlimited</span> <span class="title">swap</span></span></span><br><span class="line"><span class="function">      --<span class="title">network</span> <span class="title">string</span>          <span class="title">Set</span> <span class="title">the</span> <span class="title">networking</span> <span class="title">mode</span> <span class="title">for</span> <span class="title">the</span> <span class="title">RUN</span> <span class="title">instructions</span> <span class="title">during</span> <span class="title">build</span> (<span class="title">default</span> "<span class="title">default</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">cache</span>                <span class="title">Do</span> <span class="title">not</span> <span class="title">use</span> <span class="title">cache</span> <span class="title">when</span> <span class="title">building</span> <span class="title">the</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  -<span class="title">o</span>, --<span class="title">output</span> <span class="title">stringArray</span>      <span class="title">Output</span> <span class="title">destination</span> (<span class="title">format</span>: <span class="title">type</span>=<span class="title">local</span>,<span class="title">dest</span>=<span class="title">path</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">platform</span> <span class="title">string</span>         <span class="title">Set</span> <span class="title">platform</span> <span class="title">if</span> <span class="title">server</span> <span class="title">is</span> <span class="title">multi</span>-<span class="title">platform</span> <span class="title">capable</span></span></span><br><span class="line"><span class="function">      --<span class="title">progress</span> <span class="title">string</span>         <span class="title">Set</span> <span class="title">type</span> <span class="title">of</span> <span class="title">progress</span> <span class="title">output</span> (<span class="title">auto</span>, <span class="title">plain</span>, <span class="title">tty</span>). <span class="title">Use</span> <span class="title">plain</span> <span class="title">to</span> <span class="title">show</span> <span class="title">container</span> <span class="title">output</span> (<span class="title">default</span> "<span class="title">auto</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">pull</span>                    <span class="title">Always</span> <span class="title">attempt</span> <span class="title">to</span> <span class="title">pull</span> <span class="title">a</span> <span class="title">newer</span> <span class="title">version</span> <span class="title">of</span> <span class="title">the</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  -<span class="title">q</span>, --<span class="title">quiet</span>                   <span class="title">Suppress</span> <span class="title">the</span> <span class="title">build</span> <span class="title">output</span> <span class="title">and</span> <span class="title">print</span> <span class="title">image</span> <span class="title">ID</span> <span class="title">on</span> <span class="title">success</span></span></span><br><span class="line"><span class="function">      --<span class="title">rm</span>                      <span class="title">Remove</span> <span class="title">intermediate</span> <span class="title">containers</span> <span class="title">after</span> <span class="title">a</span> <span class="title">successful</span> <span class="title">build</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">secret</span> <span class="title">stringArray</span>      <span class="title">Secret</span> <span class="title">file</span> <span class="title">to</span> <span class="title">expose</span> <span class="title">to</span> <span class="title">the</span> <span class="title">build</span> (<span class="title">only</span> <span class="title">if</span> <span class="title">BuildKit</span> <span class="title">enabled</span>): <span class="title">id</span>=<span class="title">mysecret</span>,<span class="title">src</span>=/<span class="title">local</span>/<span class="title">secret</span></span></span><br><span class="line"><span class="function">      --<span class="title">security</span>-<span class="title">opt</span> <span class="title">strings</span>    <span class="title">Security</span> <span class="title">options</span></span></span><br><span class="line"><span class="function">      --<span class="title">shm</span>-<span class="title">size</span> <span class="title">bytes</span>          <span class="title">Size</span> <span class="title">of</span> /<span class="title">dev</span>/<span class="title">shm</span></span></span><br><span class="line"><span class="function">      --<span class="title">squash</span>                  <span class="title">Squash</span> <span class="title">newly</span> <span class="title">built</span> <span class="title">layers</span> <span class="title">into</span> <span class="title">a</span> <span class="title">single</span> <span class="title">new</span> <span class="title">layer</span></span></span><br><span class="line"><span class="function">      --<span class="title">ssh</span> <span class="title">stringArray</span>         <span class="title">SSH</span> <span class="title">agent</span> <span class="title">socket</span> <span class="title">or</span> <span class="title">keys</span> <span class="title">to</span> <span class="title">expose</span> <span class="title">to</span> <span class="title">the</span> <span class="title">build</span> (<span class="title">only</span> <span class="title">if</span> <span class="title">BuildKit</span> <span class="title">enabled</span>) (<span class="title">format</span>: <span class="title">default</span>|&lt;<span class="title">id</span>&gt;[=&lt;<span class="title">socket</span>&gt;|&lt;<span class="title">key</span>&gt;[,&lt;<span class="title">key</span>&gt;]])</span></span><br><span class="line"><span class="function">      --<span class="title">stream</span>                  <span class="title">Stream</span> <span class="title">attaches</span> <span class="title">to</span> <span class="title">server</span> <span class="title">to</span> <span class="title">negotiate</span> <span class="title">build</span> <span class="title">context</span></span></span><br><span class="line"><span class="function">  -<span class="title">t</span>, --<span class="title">tag</span> <span class="title">list</span>                <span class="title">Name</span> <span class="title">and</span> <span class="title">optionally</span> <span class="title">a</span> <span class="title">tag</span> <span class="title">in</span> <span class="title">the</span> '<span class="title">name:tag</span>' <span class="title">format</span></span></span><br><span class="line"><span class="function">      --<span class="title">target</span> <span class="title">string</span>           <span class="title">Set</span> <span class="title">the</span> <span class="title">target</span> <span class="title">build</span> <span class="title">stage</span> <span class="title">to</span> <span class="title">build</span>.</span></span><br><span class="line"><span class="function">      --<span class="title">ulimit</span> <span class="title">ulimit</span>           <span class="title">Ulimit</span> <span class="title">options</span> (<span class="title">default</span> [])</span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap compose_test]# docker build -t docker_web -f Dockerfile .</span><br><span class="line">Sending build context to Docker daemon  <span class="number">6</span>.<span class="number">144</span>kB</span><br><span class="line">Step <span class="number">1</span>/<span class="number">5</span> : FROM python:<span class="number">3</span>.<span class="number">7</span></span><br><span class="line"> ---&gt; <span class="number">978</span>a47fa762f</span><br><span class="line">Step <span class="number">2</span>/<span class="number">5</span> : <span class="built_in">COPY</span> src/ /opt/src</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; f2e42b56b98b</span><br><span class="line">Step <span class="number">3</span>/<span class="number">5</span> : WORKDIR /opt/src</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; <span class="number">84</span>d1debebaf3</span><br><span class="line">Step <span class="number">4</span>/<span class="number">5</span> : RUN pip install -r requirements.txt</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; <span class="number">5</span>e63e1ecf854</span><br><span class="line">Step <span class="number">5</span>/<span class="number">5</span> : <span class="built_in">CMD</span> ["python", "app.py"]</span><br><span class="line"> ---&gt; Using cache</span><br><span class="line"> ---&gt; d7ebf4a81d35</span><br><span class="line">Successfully built d7ebf4a81d35</span><br><span class="line">Successfully tagged docker_web:latest</span><br></pre></td></tr></table></figure>

<h4 id="查看镜像列表-docker-images"><a href="#查看镜像列表-docker-images" class="headerlink" title="查看镜像列表  docker images"></a><strong>查看镜像列表</strong>  <code>docker images</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker images</span><br><span class="line">REPOSITORY                 TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">python                     <span class="number">3</span>.<span class="number">6</span>                 <span class="number">6693</span>bf717fb6        <span class="number">4</span> months ago        <span class="number">874</span>MB</span><br><span class="line">jumpserver/jms_koko        <span class="number">1</span>.<span class="number">5</span>.<span class="number">9</span>               <span class="number">86</span>b49fc31c21        <span class="number">6</span> months ago        <span class="number">356</span>MB</span><br><span class="line">jumpserver/jms_guacamole   <span class="number">1</span>.<span class="number">5</span>.<span class="number">9</span>               <span class="number">0</span>c3963b634a4        <span class="number">6</span> months ago        <span class="number">657</span>MB</span><br><span class="line">consul                     latest              <span class="number">0544</span>f375e878        <span class="number">7</span> months ago        <span class="number">117</span>MB</span><br><span class="line">hello-world                latest              bf756fb1ae65        <span class="number">11</span> months ago       <span class="number">13</span>.<span class="number">3</span>kB</span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker images -h</span><br><span class="line">Flag shorthand -h has been deprecated, please use --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">images</span> [<span class="title">OPTIONS</span>] [<span class="title">REPOSITORY</span>[:<span class="title">TAG</span>]]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">List</span> <span class="title">images</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">all</span>             <span class="title">Show</span> <span class="title">all</span> <span class="title">images</span> (<span class="title">default</span> <span class="title">hides</span> <span class="title">intermediate</span> <span class="title">images</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">digests</span>         <span class="title">Show</span> <span class="title">digests</span></span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">filter</span> <span class="title">filter</span>   <span class="title">Filter</span> <span class="title">output</span> <span class="title">based</span> <span class="title">on</span> <span class="title">conditions</span> <span class="title">provided</span></span></span><br><span class="line"><span class="function">      --<span class="title">format</span> <span class="title">string</span>   <span class="title">Pretty</span>-<span class="title">print</span> <span class="title">images</span> <span class="title">using</span> <span class="title">a</span> <span class="title">Go</span> <span class="title">template</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">trunc</span>        <span class="title">Don</span>'<span class="title">t</span> <span class="title">truncate</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">  -<span class="title">q</span>, --<span class="title">quiet</span>           <span class="title">Only</span> <span class="title">show</span> <span class="title">numeric</span> <span class="title">IDs</span></span></span><br></pre></td></tr></table></figure>

<h4 id="搜索镜像-docker-search-lt-镜像名字-gt"><a href="#搜索镜像-docker-search-lt-镜像名字-gt" class="headerlink" title="搜索镜像 docker search &lt;镜像名字&gt;"></a>搜索镜像 <code>docker search &lt;镜像名字&gt;</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker search nginx</span><br><span class="line">NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED</span><br><span class="line">nginx                              Official build of Nginx.                        <span class="number">14172</span>               [OK]</span><br><span class="line">jwilder/nginx-proxy                Automated Nginx reverse proxy <span class="keyword">for</span> docker <span class="built_in">con</span>…   <span class="number">1929</span>                                    [OK]</span><br><span class="line">richarvey/nginx-php-fpm            Container running Nginx + PHP-FPM capable of…   <span class="number">797</span>                                     [OK]</span><br><span class="line">linuxserver/nginx                  An Nginx container, brought to you by LinuxS…   <span class="number">134</span></span><br><span class="line">jc21/nginx-proxy-manager           Docker container <span class="keyword">for</span> managing Nginx proxy ho…   <span class="number">120</span></span><br><span class="line">tiangolo/nginx-rtmp                Docker image with Nginx using the nginx-rtmp…   <span class="number">106</span>                                     [OK]</span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker search -h</span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">search</span> [<span class="title">OPTIONS</span>] <span class="title">TERM</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Search</span> <span class="title">the</span> <span class="title">Docker</span> <span class="title">Hub</span> <span class="title">for</span> <span class="title">images</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">filter</span> <span class="title">filter</span>   <span class="title">Filter</span> <span class="title">output</span> <span class="title">based</span> <span class="title">on</span> <span class="title">conditions</span> <span class="title">provided</span></span></span><br><span class="line"><span class="function">      --<span class="title">format</span> <span class="title">string</span>   <span class="title">Pretty</span>-<span class="title">print</span> <span class="title">search</span> <span class="title">using</span> <span class="title">a</span> <span class="title">Go</span> <span class="title">template</span></span></span><br><span class="line"><span class="function">      --<span class="title">limit</span> <span class="title">int</span>       <span class="title">Max</span> <span class="title">number</span> <span class="title">of</span> <span class="title">search</span> <span class="title">results</span> (<span class="title">default</span> 25)</span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">trunc</span>        <span class="title">Don</span>'<span class="title">t</span> <span class="title">truncate</span> <span class="title">output</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># 过滤<span class="title">stars</span>大于200，且是官方的<span class="title">nginx</span>镜像</span></span><br><span class="line"><span class="function"><span class="title">docker</span> <span class="title">search</span> <span class="title">nginx</span> -<span class="title">f</span> <span class="title">stars</span>=200 <span class="title">is</span>-<span class="title">official</span>=<span class="title">true</span></span></span><br></pre></td></tr></table></figure>

<h4 id="拉取镜像-docker-pull-lt-镜像名字-gt"><a href="#拉取镜像-docker-pull-lt-镜像名字-gt" class="headerlink" title="拉取镜像  docker pull &lt;镜像名字&gt;"></a>拉取镜像  <code>docker pull &lt;镜像名字&gt;</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker pull hello-world</span><br><span class="line">Using default tag: latest</span><br><span class="line"><span class="function">latest: <span class="title">Pulling</span> <span class="title">from</span> <span class="title">library</span>/<span class="title">hello</span>-<span class="title">world</span></span></span><br><span class="line"><span class="function">0<span class="title">e03bdcc26d7</span>: <span class="title">Already</span> <span class="title">exists</span></span></span><br><span class="line"><span class="function"><span class="title">Digest</span>: <span class="title">sha256</span>:1<span class="title">a523af650137b8accdaed439c17d684df61ee4d74feac151b5b337bd29e7eec</span></span></span><br><span class="line"><span class="function"><span class="title">Status</span>: <span class="title">Downloaded</span> <span class="title">newer</span> <span class="title">image</span> <span class="title">for</span> <span class="title">hello</span>-<span class="title">world:latest</span></span></span><br><span class="line"><span class="function"><span class="title">docker.io</span>/<span class="title">library</span>/<span class="title">hello</span>-<span class="title">world:latest</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker pull -h</span><br><span class="line">Flag shorthand -h has been deprecated, please use --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">pull</span> [<span class="title">OPTIONS</span>] <span class="title">NAME</span>[:<span class="title">TAG</span>|@<span class="title">DIGEST</span>]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Pull</span> <span class="title">an</span> <span class="title">image</span> <span class="title">or</span> <span class="title">a</span> <span class="title">repository</span> <span class="title">from</span> <span class="title">a</span> <span class="title">registry</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">all</span>-<span class="title">tags</span>                <span class="title">Download</span> <span class="title">all</span> <span class="title">tagged</span> <span class="title">images</span> <span class="title">in</span> <span class="title">the</span> <span class="title">repository</span></span></span><br><span class="line"><span class="function">      --<span class="title">disable</span>-<span class="title">content</span>-<span class="title">trust</span>   <span class="title">Skip</span> <span class="title">image</span> <span class="title">verification</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">platform</span> <span class="title">string</span>         <span class="title">Set</span> <span class="title">platform</span> <span class="title">if</span> <span class="title">server</span> <span class="title">is</span> <span class="title">multi</span>-<span class="title">platform</span> <span class="title">capable</span></span></span><br><span class="line"><span class="function">  -<span class="title">q</span>, --<span class="title">quiet</span>                   <span class="title">Suppress</span> <span class="title">verbose</span> <span class="title">output</span></span></span><br></pre></td></tr></table></figure>

<h4 id="删除镜像：docker-rmi-lt-镜像名字-gt"><a href="#删除镜像：docker-rmi-lt-镜像名字-gt" class="headerlink" title="删除镜像：docker rmi &lt;镜像名字&gt;"></a>删除镜像：<code>docker rmi &lt;镜像名字&gt;</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rmi -f  hello-world</span><br><span class="line"><span class="function">Untagged: <span class="title">hello</span>-<span class="title">world:latest</span></span></span><br><span class="line"><span class="function"><span class="title">Untagged</span>: <span class="title">hello</span>-<span class="title">world</span>@<span class="title">sha256</span>:1<span class="title">a523af650137b8accdaed439c17d684df61ee4d74feac151b5b337bd29e7eec</span></span></span><br><span class="line"><span class="function"><span class="title">Deleted</span>: <span class="title">sha256:bf756fb1ae65adf866bd8c456593cd24beb6a0a061dedf42b26a993176745f6b</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rmi -h</span><br><span class="line">Flag shorthand -h has been deprecated, please use --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">rmi</span> [<span class="title">OPTIONS</span>] <span class="title">IMAGE</span> [<span class="title">IMAGE</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Remove</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">images</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">force</span>      <span class="title">Force</span> <span class="title">removal</span> <span class="title">of</span> <span class="title">the</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">prune</span>   <span class="title">Do</span> <span class="title">not</span> <span class="title">delete</span> <span class="title">untagged</span> <span class="title">parents</span></span></span><br></pre></td></tr></table></figure>

<h4 id="提交信息到镜像-docker-commit"><a href="#提交信息到镜像-docker-commit" class="headerlink" title="提交信息到镜像 docker commit"></a>提交信息到镜像 <code>docker commit</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker commit --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">commit</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> [<span class="title">REPOSITORY</span>[:<span class="title">TAG</span>]]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Create</span> <span class="title">a</span> <span class="title">new</span> <span class="title">image</span> <span class="title">from</span> <span class="title">a</span> <span class="title">container</span>'<span class="title">s</span> <span class="title">changes</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">author</span> <span class="title">string</span>    <span class="title">Author</span> (<span class="title">e.g</span>., "<span class="title">John</span> <span class="title">Hannibal</span> <span class="title">Smith</span> &lt;<span class="title">hannibal</span>@<span class="title">a</span>-<span class="title">team.com</span>&gt;")</span></span><br><span class="line"><span class="function">  -<span class="title">c</span>, --<span class="title">change</span> <span class="title">list</span>      <span class="title">Apply</span> <span class="title">Dockerfile</span> <span class="title">instruction</span> <span class="title">to</span> <span class="title">the</span> <span class="title">created</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  -<span class="title">m</span>, --<span class="title">message</span> <span class="title">string</span>   <span class="title">Commit</span> <span class="title">message</span></span></span><br><span class="line"><span class="function">  -<span class="title">p</span>, --<span class="title">pause</span>            <span class="title">Pause</span> <span class="title">container</span> <span class="title">during</span> <span class="title">commit</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br></pre></td></tr></table></figure>

<h4 id="导出镜像-docker-save-o-name-tar-lt-imageID-gt"><a href="#导出镜像-docker-save-o-name-tar-lt-imageID-gt" class="headerlink" title="导出镜像 docker save -o name.tar &lt;imageID&gt;"></a>导出镜像 <code>docker save -o name.tar &lt;imageID&gt;</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker save --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">save</span> [<span class="title">OPTIONS</span>] <span class="title">IMAGE</span> [<span class="title">IMAGE</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Save</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">images</span> <span class="title">to</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span> (<span class="title">streamed</span> <span class="title">to</span> <span class="title">STDOUT</span> <span class="title">by</span> <span class="title">default</span>)</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">o</span>, --<span class="title">output</span> <span class="title">string</span>   <span class="title">Write</span> <span class="title">to</span> <span class="title">a</span> <span class="title">file</span>, <span class="title">instead</span> <span class="title">of</span> <span class="title">STDOUT</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker save -o tomcat-<span class="number">8</span>.<span class="number">5</span>.tar tomcat:<span class="number">8</span>.<span class="number">5</span></span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# ll</span><br><span class="line">total <span class="number">612460</span></span><br><span class="line">-rw------- <span class="number">1</span> root root <span class="number">544990208</span> Dec <span class="number">20</span> <span class="number">17</span>:<span class="number">48</span> tomcat-<span class="number">8</span>.<span class="number">5</span>.tar</span><br><span class="line"></span><br><span class="line"># 导出的文件在当前目录，上述命令亦可用下面的命令替代</span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker save tomcat:<span class="number">8</span>.<span class="number">5</span> &gt; tomcat-<span class="number">8</span>.<span class="number">5</span>.tar.<span class="built_in">copy</span></span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# ll</span><br><span class="line">-rw------- <span class="number">1</span> root root <span class="number">544990208</span> Dec <span class="number">20</span> <span class="number">17</span>:<span class="number">48</span> tomcat-<span class="number">8</span>.<span class="number">5</span>.tar</span><br><span class="line">-rw-r--r-- <span class="number">1</span> root root <span class="number">544990208</span> Dec <span class="number">20</span> <span class="number">17</span>:<span class="number">53</span> tomcat-<span class="number">8</span>.<span class="number">5</span>.tar.<span class="built_in">copy</span></span><br></pre></td></tr></table></figure>

<h4 id="导入镜像-docker-load-i-lt-镜像tar包-gt"><a href="#导入镜像-docker-load-i-lt-镜像tar包-gt" class="headerlink" title="导入镜像 docker load -i &lt;镜像tar包&gt;"></a>导入镜像 <code>docker load -i &lt;镜像tar包&gt;</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker load --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">load</span> [<span class="title">OPTIONS</span>]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Load</span> <span class="title">an</span> <span class="title">image</span> <span class="title">from</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span> <span class="title">or</span> <span class="title">STDIN</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">i</span>, --<span class="title">input</span> <span class="title">string</span>   <span class="title">Read</span> <span class="title">from</span> <span class="title">tar</span> <span class="title">archive</span> <span class="title">file</span>, <span class="title">instead</span> <span class="title">of</span> <span class="title">STDIN</span></span></span><br><span class="line"><span class="function">  -<span class="title">q</span>, --<span class="title">quiet</span>          <span class="title">Suppress</span> <span class="title">the</span> <span class="title">load</span> <span class="title">output</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 方式一</span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker load -i tomcat-<span class="number">8</span>.<span class="number">5</span>.tar</span><br><span class="line"><span class="function">ffb4778f8a52: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  3.584<span class="title">kB</span>/3.584<span class="title">kB</span></span></span><br><span class="line"><span class="function"><span class="title">f85e383859a1</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  209.7<span class="title">MB</span>/209.7<span class="title">MB</span></span></span><br><span class="line"><span class="function">534<span class="title">cb8e32a3a</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]   2.56<span class="title">kB</span>/2.56<span class="title">kB</span></span></span><br><span class="line"><span class="function"><span class="title">ffe983ff0cbb</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  19.58<span class="title">MB</span>/19.58<span class="title">MB</span></span></span><br><span class="line"><span class="function"><span class="title">b0968020cd45</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  2.048<span class="title">kB</span>/2.048<span class="title">kB</span></span></span><br><span class="line"><span class="function"><span class="title">Loaded</span> <span class="title">image</span>: <span class="title">tomcat</span>:8.5</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># 方式二</span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">i</span>-6<span class="title">x8256ap</span> ~]# <span class="title">docker</span> <span class="title">load</span> &lt; <span class="title">tomcat</span>-8.5.<span class="title">tar.copy</span></span></span><br><span class="line"><span class="function"><span class="title">ffb4778f8a52</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  3.584<span class="title">kB</span>/3.584<span class="title">kB</span></span></span><br><span class="line"><span class="function"><span class="title">f85e383859a1</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  209.7<span class="title">MB</span>/209.7<span class="title">MB</span></span></span><br><span class="line"><span class="function">534<span class="title">cb8e32a3a</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]   2.56<span class="title">kB</span>/2.56<span class="title">kB</span></span></span><br><span class="line"><span class="function"><span class="title">ffe983ff0cbb</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  19.58<span class="title">MB</span>/19.58<span class="title">MB</span></span></span><br><span class="line"><span class="function"><span class="title">b0968020cd45</span>: <span class="title">Loading</span> <span class="title">layer</span> [==================================================&gt;]  2.048<span class="title">kB</span>/2.048<span class="title">kB</span></span></span><br><span class="line"><span class="function"><span class="title">Loaded</span> <span class="title">image</span>: <span class="title">tomcat</span>:8.5</span></span><br></pre></td></tr></table></figure>

<h3 id="容器相关的命令"><a href="#容器相关的命令" class="headerlink" title="容器相关的命令"></a>容器相关的命令</h3><h4 id="创建并启动容器-docker-run"><a href="#创建并启动容器-docker-run" class="headerlink" title="创建并启动容器  docker run"></a>创建并启动容器  <code>docker run</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker run --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">run</span> [<span class="title">OPTIONS</span>] <span class="title">IMAGE</span> [<span class="title">COMMAND</span>] [<span class="title">ARG</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Run</span> <span class="title">a</span> <span class="title">command</span> <span class="title">in</span> <span class="title">a</span> <span class="title">new</span> <span class="title">container</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">add</span>-<span class="title">host</span> <span class="title">list</span>                  <span class="title">Add</span> <span class="title">a</span> <span class="title">custom</span> <span class="title">host</span>-<span class="title">to</span>-<span class="title">IP</span> <span class="title">mapping</span> (<span class="title">host:ip</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">attach</span> <span class="title">list</span>                    <span class="title">Attach</span> <span class="title">to</span> <span class="title">STDIN</span>, <span class="title">STDOUT</span> <span class="title">or</span> <span class="title">STDERR</span></span></span><br><span class="line"><span class="function">      --<span class="title">blkio</span>-<span class="title">weight</span> <span class="title">uint16</span>            <span class="title">Block</span> <span class="title">IO</span> (<span class="title">relative</span> <span class="title">weight</span>), <span class="title">between</span> 10 <span class="title">and</span> 1000, <span class="title">or</span> 0 <span class="title">to</span> <span class="title">disable</span> (<span class="title">default</span> 0)</span></span><br><span class="line"><span class="function">      --<span class="title">blkio</span>-<span class="title">weight</span>-<span class="title">device</span> <span class="title">list</span>       <span class="title">Block</span> <span class="title">IO</span> <span class="title">weight</span> (<span class="title">relative</span> <span class="title">device</span> <span class="title">weight</span>) (<span class="title">default</span> [])</span></span><br><span class="line"><span class="function">      --<span class="title">cap</span>-<span class="title">add</span> <span class="title">list</span>                   <span class="title">Add</span> <span class="title">Linux</span> <span class="title">capabilities</span></span></span><br><span class="line"><span class="function">      --<span class="title">cap</span>-<span class="title">drop</span> <span class="title">list</span>                  <span class="title">Drop</span> <span class="title">Linux</span> <span class="title">capabilities</span></span></span><br><span class="line"><span class="function">      --<span class="title">cgroup</span>-<span class="title">parent</span> <span class="title">string</span>           <span class="title">Optional</span> <span class="title">parent</span> <span class="title">cgroup</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">cidfile</span> <span class="title">string</span>                 <span class="title">Write</span> <span class="title">the</span> <span class="title">container</span> <span class="title">ID</span> <span class="title">to</span> <span class="title">the</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpu</span>-<span class="title">period</span> <span class="title">int</span>                 <span class="title">Limit</span> <span class="title">CPU</span> <span class="title">CFS</span> (<span class="title">Completely</span> <span class="title">Fair</span> <span class="title">Scheduler</span>) <span class="title">period</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpu</span>-<span class="title">quota</span> <span class="title">int</span>                  <span class="title">Limit</span> <span class="title">CPU</span> <span class="title">CFS</span> (<span class="title">Completely</span> <span class="title">Fair</span> <span class="title">Scheduler</span>) <span class="title">quota</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpu</span>-<span class="title">rt</span>-<span class="title">period</span> <span class="title">int</span>              <span class="title">Limit</span> <span class="title">CPU</span> <span class="title">real</span>-<span class="title">time</span> <span class="title">period</span> <span class="title">in</span> <span class="title">microseconds</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpu</span>-<span class="title">rt</span>-<span class="title">runtime</span> <span class="title">int</span>             <span class="title">Limit</span> <span class="title">CPU</span> <span class="title">real</span>-<span class="title">time</span> <span class="title">runtime</span> <span class="title">in</span> <span class="title">microseconds</span></span></span><br><span class="line"><span class="function">  -<span class="title">c</span>, --<span class="title">cpu</span>-<span class="title">shares</span> <span class="title">int</span>                 <span class="title">CPU</span> <span class="title">shares</span> (<span class="title">relative</span> <span class="title">weight</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">cpus</span> <span class="title">decimal</span>                   <span class="title">Number</span> <span class="title">of</span> <span class="title">CPUs</span></span></span><br><span class="line"><span class="function">      --<span class="title">cpuset</span>-<span class="title">cpus</span> <span class="title">string</span>             <span class="title">CPUs</span> <span class="title">in</span> <span class="title">which</span> <span class="title">to</span> <span class="title">allow</span> <span class="title">execution</span> (0-3, 0,1)</span></span><br><span class="line"><span class="function">      --<span class="title">cpuset</span>-<span class="title">mems</span> <span class="title">string</span>             <span class="title">MEMs</span> <span class="title">in</span> <span class="title">which</span> <span class="title">to</span> <span class="title">allow</span> <span class="title">execution</span> (0-3, 0,1)</span></span><br><span class="line"><span class="function">  -<span class="title">d</span>, --<span class="title">detach</span>                         <span class="title">Run</span> <span class="title">container</span> <span class="title">in</span> <span class="title">background</span> <span class="title">and</span> <span class="title">print</span> <span class="title">container</span> <span class="title">ID</span></span></span><br><span class="line"><span class="function">      --<span class="title">detach</span>-<span class="title">keys</span> <span class="title">string</span>             <span class="title">Override</span> <span class="title">the</span> <span class="title">key</span> <span class="title">sequence</span> <span class="title">for</span> <span class="title">detaching</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">device</span> <span class="title">list</span>                    <span class="title">Add</span> <span class="title">a</span> <span class="title">host</span> <span class="title">device</span> <span class="title">to</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">device</span>-<span class="title">cgroup</span>-<span class="title">rule</span> <span class="title">list</span>        <span class="title">Add</span> <span class="title">a</span> <span class="title">rule</span> <span class="title">to</span> <span class="title">the</span> <span class="title">cgroup</span> <span class="title">allowed</span> <span class="title">devices</span> <span class="title">list</span></span></span><br><span class="line"><span class="function">      --<span class="title">device</span>-<span class="title">read</span>-<span class="title">bps</span> <span class="title">list</span>           <span class="title">Limit</span> <span class="title">read</span> <span class="title">rate</span> (<span class="title">bytes</span> <span class="title">per</span> <span class="title">second</span>) <span class="title">from</span> <span class="title">a</span> <span class="title">device</span> (<span class="title">default</span> [])</span></span><br><span class="line"><span class="function">      --<span class="title">device</span>-<span class="title">read</span>-<span class="title">iops</span> <span class="title">list</span>          <span class="title">Limit</span> <span class="title">read</span> <span class="title">rate</span> (<span class="title">IO</span> <span class="title">per</span> <span class="title">second</span>) <span class="title">from</span> <span class="title">a</span> <span class="title">device</span> (<span class="title">default</span> [])</span></span><br><span class="line"><span class="function">      --<span class="title">device</span>-<span class="title">write</span>-<span class="title">bps</span> <span class="title">list</span>          <span class="title">Limit</span> <span class="title">write</span> <span class="title">rate</span> (<span class="title">bytes</span> <span class="title">per</span> <span class="title">second</span>) <span class="title">to</span> <span class="title">a</span> <span class="title">device</span> (<span class="title">default</span> [])</span></span><br><span class="line"><span class="function">      --<span class="title">device</span>-<span class="title">write</span>-<span class="title">iops</span> <span class="title">list</span>         <span class="title">Limit</span> <span class="title">write</span> <span class="title">rate</span> (<span class="title">IO</span> <span class="title">per</span> <span class="title">second</span>) <span class="title">to</span> <span class="title">a</span> <span class="title">device</span> (<span class="title">default</span> [])</span></span><br><span class="line"><span class="function">      --<span class="title">disable</span>-<span class="title">content</span>-<span class="title">trust</span>          <span class="title">Skip</span> <span class="title">image</span> <span class="title">verification</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">dns</span> <span class="title">list</span>                       <span class="title">Set</span> <span class="title">custom</span> <span class="title">DNS</span> <span class="title">servers</span></span></span><br><span class="line"><span class="function">      --<span class="title">dns</span>-<span class="title">option</span> <span class="title">list</span>                <span class="title">Set</span> <span class="title">DNS</span> <span class="title">options</span></span></span><br><span class="line"><span class="function">      --<span class="title">dns</span>-<span class="title">search</span> <span class="title">list</span>                <span class="title">Set</span> <span class="title">custom</span> <span class="title">DNS</span> <span class="title">search</span> <span class="title">domains</span></span></span><br><span class="line"><span class="function">      --<span class="title">domainname</span> <span class="title">string</span>              <span class="title">Container</span> <span class="title">NIS</span> <span class="title">domain</span> <span class="title">name</span></span></span><br><span class="line"><span class="function">      --<span class="title">entrypoint</span> <span class="title">string</span>              <span class="title">Overwrite</span> <span class="title">the</span> <span class="title">default</span> <span class="title">ENTRYPOINT</span> <span class="title">of</span> <span class="title">the</span> <span class="title">image</span></span></span><br><span class="line"><span class="function">  -<span class="title">e</span>, --<span class="title">env</span> <span class="title">list</span>                       <span class="title">Set</span> <span class="title">environment</span> <span class="title">variables</span></span></span><br><span class="line"><span class="function">      --<span class="title">env</span>-<span class="title">file</span> <span class="title">list</span>                  <span class="title">Read</span> <span class="title">in</span> <span class="title">a</span> <span class="title">file</span> <span class="title">of</span> <span class="title">environment</span> <span class="title">variables</span></span></span><br><span class="line"><span class="function">      --<span class="title">expose</span> <span class="title">list</span>                    <span class="title">Expose</span> <span class="title">a</span> <span class="title">port</span> <span class="title">or</span> <span class="title">a</span> <span class="title">range</span> <span class="title">of</span> <span class="title">ports</span></span></span><br><span class="line"><span class="function">      --<span class="title">gpus</span> <span class="title">gpu</span>-<span class="title">request</span>               <span class="title">GPU</span> <span class="title">devices</span> <span class="title">to</span> <span class="title">add</span> <span class="title">to</span> <span class="title">the</span> <span class="title">container</span> ('<span class="title">all</span>' <span class="title">to</span> <span class="title">pass</span> <span class="title">all</span> <span class="title">GPUs</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">group</span>-<span class="title">add</span> <span class="title">list</span>                 <span class="title">Add</span> <span class="title">additional</span> <span class="title">groups</span> <span class="title">to</span> <span class="title">join</span></span></span><br><span class="line"><span class="function">      --<span class="title">health</span>-<span class="title">cmd</span> <span class="title">string</span>              <span class="title">Command</span> <span class="title">to</span> <span class="title">run</span> <span class="title">to</span> <span class="title">check</span> <span class="title">health</span></span></span><br><span class="line"><span class="function">      --<span class="title">health</span>-<span class="title">interval</span> <span class="title">duration</span>       <span class="title">Time</span> <span class="title">between</span> <span class="title">running</span> <span class="title">the</span> <span class="title">check</span> (<span class="title">ms</span>|<span class="title">s</span>|<span class="title">m</span>|<span class="title">h</span>) (<span class="title">default</span> 0<span class="title">s</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">health</span>-<span class="title">retries</span> <span class="title">int</span>             <span class="title">Consecutive</span> <span class="title">failures</span> <span class="title">needed</span> <span class="title">to</span> <span class="title">report</span> <span class="title">unhealthy</span></span></span><br><span class="line"><span class="function">      --<span class="title">health</span>-<span class="title">start</span>-<span class="title">period</span> <span class="title">duration</span>   <span class="title">Start</span> <span class="title">period</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span> <span class="title">to</span> <span class="title">initialize</span> <span class="title">before</span> <span class="title">starting</span> <span class="title">health</span>-<span class="title">retries</span></span></span><br><span class="line"><span class="function">                                       <span class="title">countdown</span> (<span class="title">ms</span>|<span class="title">s</span>|<span class="title">m</span>|<span class="title">h</span>) (<span class="title">default</span> 0<span class="title">s</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">health</span>-<span class="title">timeout</span> <span class="title">duration</span>        <span class="title">Maximum</span> <span class="title">time</span> <span class="title">to</span> <span class="title">allow</span> <span class="title">one</span> <span class="title">check</span> <span class="title">to</span> <span class="title">run</span> (<span class="title">ms</span>|<span class="title">s</span>|<span class="title">m</span>|<span class="title">h</span>) (<span class="title">default</span> 0<span class="title">s</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">help</span>                           <span class="title">Print</span> <span class="title">usage</span></span></span><br><span class="line"><span class="function">  -<span class="title">h</span>, --<span class="title">hostname</span> <span class="title">string</span>                <span class="title">Container</span> <span class="title">host</span> <span class="title">name</span></span></span><br><span class="line"><span class="function">      --<span class="title">init</span>                           <span class="title">Run</span> <span class="title">an</span> <span class="title">init</span> <span class="title">inside</span> <span class="title">the</span> <span class="title">container</span> <span class="title">that</span> <span class="title">forwards</span> <span class="title">signals</span> <span class="title">and</span> <span class="title">reaps</span> <span class="title">processes</span></span></span><br><span class="line"><span class="function">  -<span class="title">i</span>, --<span class="title">interactive</span>                    <span class="title">Keep</span> <span class="title">STDIN</span> <span class="title">open</span> <span class="title">even</span> <span class="title">if</span> <span class="title">not</span> <span class="title">attached</span></span></span><br><span class="line"><span class="function">      --<span class="title">ip</span> <span class="title">string</span>                      <span class="title">IPv4</span> <span class="title">address</span> (<span class="title">e.g</span>., 172.30.100.104)</span></span><br><span class="line"><span class="function">      --<span class="title">ip6</span> <span class="title">string</span>                     <span class="title">IPv6</span> <span class="title">address</span> (<span class="title">e.g</span>., 2001:<span class="title">db8</span>::33)</span></span><br><span class="line"><span class="function">      --<span class="title">ipc</span> <span class="title">string</span>                     <span class="title">IPC</span> <span class="title">mode</span> <span class="title">to</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">      --<span class="title">isolation</span> <span class="title">string</span>               <span class="title">Container</span> <span class="title">isolation</span> <span class="title">technology</span></span></span><br><span class="line"><span class="function">      --<span class="title">kernel</span>-<span class="title">memory</span> <span class="title">bytes</span>            <span class="title">Kernel</span> <span class="title">memory</span> <span class="title">limit</span></span></span><br><span class="line"><span class="function">  -<span class="title">l</span>, --<span class="title">label</span> <span class="title">list</span>                     <span class="title">Set</span> <span class="title">meta</span> <span class="title">data</span> <span class="title">on</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">label</span>-<span class="title">file</span> <span class="title">list</span>                <span class="title">Read</span> <span class="title">in</span> <span class="title">a</span> <span class="title">line</span> <span class="title">delimited</span> <span class="title">file</span> <span class="title">of</span> <span class="title">labels</span></span></span><br><span class="line"><span class="function">      --<span class="title">link</span> <span class="title">list</span>                      <span class="title">Add</span> <span class="title">link</span> <span class="title">to</span> <span class="title">another</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">link</span>-<span class="title">local</span>-<span class="title">ip</span> <span class="title">list</span>             <span class="title">Container</span> <span class="title">IPv4</span>/<span class="title">IPv6</span> <span class="title">link</span>-<span class="title">local</span> <span class="title">addresses</span></span></span><br><span class="line"><span class="function">      --<span class="title">log</span>-<span class="title">driver</span> <span class="title">string</span>              <span class="title">Logging</span> <span class="title">driver</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">log</span>-<span class="title">opt</span> <span class="title">list</span>                   <span class="title">Log</span> <span class="title">driver</span> <span class="title">options</span></span></span><br><span class="line"><span class="function">      --<span class="title">mac</span>-<span class="title">address</span> <span class="title">string</span>             <span class="title">Container</span> <span class="title">MAC</span> <span class="title">address</span> (<span class="title">e.g</span>., 92:<span class="title">d0:c6</span>:0<span class="title">a</span>:29:33)</span></span><br><span class="line"><span class="function">  -<span class="title">m</span>, --<span class="title">memory</span> <span class="title">bytes</span>                   <span class="title">Memory</span> <span class="title">limit</span></span></span><br><span class="line"><span class="function">      --<span class="title">memory</span>-<span class="title">reservation</span> <span class="title">bytes</span>       <span class="title">Memory</span> <span class="title">soft</span> <span class="title">limit</span></span></span><br><span class="line"><span class="function">      --<span class="title">memory</span>-<span class="title">swap</span> <span class="title">bytes</span>              <span class="title">Swap</span> <span class="title">limit</span> <span class="title">equal</span> <span class="title">to</span> <span class="title">memory</span> <span class="title">plus</span> <span class="title">swap</span>: '-1' <span class="title">to</span> <span class="title">enable</span> <span class="title">unlimited</span> <span class="title">swap</span></span></span><br><span class="line"><span class="function">      --<span class="title">memory</span>-<span class="title">swappiness</span> <span class="title">int</span>          <span class="title">Tune</span> <span class="title">container</span> <span class="title">memory</span> <span class="title">swappiness</span> (0 <span class="title">to</span> 100) (<span class="title">default</span> -1)</span></span><br><span class="line"><span class="function">      --<span class="title">mount</span> <span class="title">mount</span>                    <span class="title">Attach</span> <span class="title">a</span> <span class="title">filesystem</span> <span class="title">mount</span> <span class="title">to</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">name</span> <span class="title">string</span>                    <span class="title">Assign</span> <span class="title">a</span> <span class="title">name</span> <span class="title">to</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">network</span> <span class="title">network</span>                <span class="title">Connect</span> <span class="title">a</span> <span class="title">container</span> <span class="title">to</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">      --<span class="title">network</span>-<span class="title">alias</span> <span class="title">list</span>             <span class="title">Add</span> <span class="title">network</span>-<span class="title">scoped</span> <span class="title">alias</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">healthcheck</span>                 <span class="title">Disable</span> <span class="title">any</span> <span class="title">container</span>-<span class="title">specified</span> <span class="title">HEALTHCHECK</span></span></span><br><span class="line"><span class="function">      --<span class="title">oom</span>-<span class="title">kill</span>-<span class="title">disable</span>               <span class="title">Disable</span> <span class="title">OOM</span> <span class="title">Killer</span></span></span><br><span class="line"><span class="function">      --<span class="title">oom</span>-<span class="title">score</span>-<span class="title">adj</span> <span class="title">int</span>              <span class="title">Tune</span> <span class="title">host</span>'<span class="title">s</span> <span class="title">OOM</span> <span class="title">preferences</span> (-1000 <span class="title">to</span> 1000)</span></span><br><span class="line"><span class="function">      --<span class="title">pid</span> <span class="title">string</span>                     <span class="title">PID</span> <span class="title">namespace</span> <span class="title">to</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">      --<span class="title">pids</span>-<span class="title">limit</span> <span class="title">int</span>                 <span class="title">Tune</span> <span class="title">container</span> <span class="title">pids</span> <span class="title">limit</span> (<span class="title">set</span> -1 <span class="title">for</span> <span class="title">unlimited</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">platform</span> <span class="title">string</span>                <span class="title">Set</span> <span class="title">platform</span> <span class="title">if</span> <span class="title">server</span> <span class="title">is</span> <span class="title">multi</span>-<span class="title">platform</span> <span class="title">capable</span></span></span><br><span class="line"><span class="function">      --<span class="title">privileged</span>                     <span class="title">Give</span> <span class="title">extended</span> <span class="title">privileges</span> <span class="title">to</span> <span class="title">this</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  -<span class="title">p</span>, --<span class="title">publish</span> <span class="title">list</span>                   <span class="title">Publish</span> <span class="title">a</span> <span class="title">container</span>'<span class="title">s</span> <span class="title">port</span>(<span class="title">s</span>) <span class="title">to</span> <span class="title">the</span> <span class="title">host</span></span></span><br><span class="line"><span class="function">  -<span class="title">P</span>, --<span class="title">publish</span>-<span class="title">all</span>                    <span class="title">Publish</span> <span class="title">all</span> <span class="title">exposed</span> <span class="title">ports</span> <span class="title">to</span> <span class="title">random</span> <span class="title">ports</span></span></span><br><span class="line"><span class="function">      --<span class="title">read</span>-<span class="title">only</span>                      <span class="title">Mount</span> <span class="title">the</span> <span class="title">container</span>'<span class="title">s</span> <span class="title">root</span> <span class="title">filesystem</span> <span class="title">as</span> <span class="title">read</span> <span class="title">only</span></span></span><br><span class="line"><span class="function">      --<span class="title">restart</span> <span class="title">string</span>                 <span class="title">Restart</span> <span class="title">policy</span> <span class="title">to</span> <span class="title">apply</span> <span class="title">when</span> <span class="title">a</span> <span class="title">container</span> <span class="title">exits</span> (<span class="title">default</span> "<span class="title">no</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">rm</span>                             <span class="title">Automatically</span> <span class="title">remove</span> <span class="title">the</span> <span class="title">container</span> <span class="title">when</span> <span class="title">it</span> <span class="title">exits</span></span></span><br><span class="line"><span class="function">      --<span class="title">runtime</span> <span class="title">string</span>                 <span class="title">Runtime</span> <span class="title">to</span> <span class="title">use</span> <span class="title">for</span> <span class="title">this</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">security</span>-<span class="title">opt</span> <span class="title">list</span>              <span class="title">Security</span> <span class="title">Options</span></span></span><br><span class="line"><span class="function">      --<span class="title">shm</span>-<span class="title">size</span> <span class="title">bytes</span>                 <span class="title">Size</span> <span class="title">of</span> /<span class="title">dev</span>/<span class="title">shm</span></span></span><br><span class="line"><span class="function">      --<span class="title">sig</span>-<span class="title">proxy</span>                      <span class="title">Proxy</span> <span class="title">received</span> <span class="title">signals</span> <span class="title">to</span> <span class="title">the</span> <span class="title">process</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">stop</span>-<span class="title">signal</span> <span class="title">string</span>             <span class="title">Signal</span> <span class="title">to</span> <span class="title">stop</span> <span class="title">a</span> <span class="title">container</span> (<span class="title">default</span> "<span class="title">SIGTERM</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">stop</span>-<span class="title">timeout</span> <span class="title">int</span>               <span class="title">Timeout</span> (<span class="title">in</span> <span class="title">seconds</span>) <span class="title">to</span> <span class="title">stop</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">storage</span>-<span class="title">opt</span> <span class="title">list</span>               <span class="title">Storage</span> <span class="title">driver</span> <span class="title">options</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">sysctl</span> <span class="title">map</span>                     <span class="title">Sysctl</span> <span class="title">options</span> (<span class="title">default</span> <span class="title">map</span>[])</span></span><br><span class="line"><span class="function">      --<span class="title">tmpfs</span> <span class="title">list</span>                     <span class="title">Mount</span> <span class="title">a</span> <span class="title">tmpfs</span> <span class="title">directory</span></span></span><br><span class="line"><span class="function">  -<span class="title">t</span>, --<span class="title">tty</span>                            <span class="title">Allocate</span> <span class="title">a</span> <span class="title">pseudo</span>-<span class="title">TTY</span></span></span><br><span class="line"><span class="function">      --<span class="title">ulimit</span> <span class="title">ulimit</span>                  <span class="title">Ulimit</span> <span class="title">options</span> (<span class="title">default</span> [])</span></span><br><span class="line"><span class="function">  -<span class="title">u</span>, --<span class="title">user</span> <span class="title">string</span>                    <span class="title">Username</span> <span class="title">or</span> <span class="title">UID</span> (<span class="title">format</span>: &lt;<span class="title">name</span>|<span class="title">uid</span>&gt;[:&lt;<span class="title">group</span>|<span class="title">gid</span>&gt;])</span></span><br><span class="line"><span class="function">      --<span class="title">userns</span> <span class="title">string</span>                  <span class="title">User</span> <span class="title">namespace</span> <span class="title">to</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">      --<span class="title">uts</span> <span class="title">string</span>                     <span class="title">UTS</span> <span class="title">namespace</span> <span class="title">to</span> <span class="title">use</span></span></span><br><span class="line"><span class="function">  -<span class="title">v</span>, --<span class="title">volume</span> <span class="title">list</span>                    <span class="title">Bind</span> <span class="title">mount</span> <span class="title">a</span> <span class="title">volume</span></span></span><br><span class="line"><span class="function">      --<span class="title">volume</span>-<span class="title">driver</span> <span class="title">string</span>           <span class="title">Optional</span> <span class="title">volume</span> <span class="title">driver</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">volumes</span>-<span class="title">from</span> <span class="title">list</span>              <span class="title">Mount</span> <span class="title">volumes</span> <span class="title">from</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">container</span>(<span class="title">s</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">w</span>, --<span class="title">workdir</span> <span class="title">string</span>                 <span class="title">Working</span> <span class="title">directory</span> <span class="title">inside</span> <span class="title">the</span> <span class="title">container</span></span></span><br></pre></td></tr></table></figure>

<h4 id="查看docker-进程-dcoker-ps"><a href="#查看docker-进程-dcoker-ps" class="headerlink" title="查看docker 进程 dcoker ps"></a>查看docker 进程 <code>dcoker ps</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker ps --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">ps</span> [<span class="title">OPTIONS</span>] # 默认显示当前正在运行的进程</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">List</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">all</span>             <span class="title">Show</span> <span class="title">all</span> <span class="title">containers</span> (<span class="title">default</span> <span class="title">shows</span> <span class="title">just</span> <span class="title">running</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">filter</span> <span class="title">filter</span>   <span class="title">Filter</span> <span class="title">output</span> <span class="title">based</span> <span class="title">on</span> <span class="title">conditions</span> <span class="title">provided</span></span></span><br><span class="line"><span class="function">      --<span class="title">format</span> <span class="title">string</span>   <span class="title">Pretty</span>-<span class="title">print</span> <span class="title">containers</span> <span class="title">using</span> <span class="title">a</span> <span class="title">Go</span> <span class="title">template</span></span></span><br><span class="line"><span class="function">  -<span class="title">n</span>, --<span class="title">last</span> <span class="title">int</span>        <span class="title">Show</span> <span class="title">n</span> <span class="title">last</span> <span class="title">created</span> <span class="title">containers</span> (<span class="title">includes</span> <span class="title">all</span> <span class="title">states</span>) (<span class="title">default</span> -1)</span></span><br><span class="line"><span class="function">  -<span class="title">l</span>, --<span class="title">latest</span>          <span class="title">Show</span> <span class="title">the</span> <span class="title">latest</span> <span class="title">created</span> <span class="title">container</span> (<span class="title">includes</span> <span class="title">all</span> <span class="title">states</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">trunc</span>        <span class="title">Don</span>'<span class="title">t</span> <span class="title">truncate</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">  -<span class="title">q</span>, --<span class="title">quiet</span>           <span class="title">Only</span> <span class="title">display</span> <span class="title">numeric</span> <span class="title">IDs</span></span></span><br><span class="line"><span class="function">  -<span class="title">s</span>, --<span class="title">size</span>            <span class="title">Display</span> <span class="title">total</span> <span class="title">file</span> <span class="title">sizes</span></span></span><br></pre></td></tr></table></figure>

<p>查看容器状态统计  <code>docker stats &lt;容器ID&gt;</code></p>
<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker stats --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">stats</span> [<span class="title">OPTIONS</span>] [<span class="title">CONTAINER</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Display</span> <span class="title">a</span> <span class="title">live</span> <span class="title">stream</span> <span class="title">of</span> <span class="title">container</span>(<span class="title">s</span>) <span class="title">resource</span> <span class="title">usage</span> <span class="title">statistics</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">all</span>             <span class="title">Show</span> <span class="title">all</span> <span class="title">containers</span> (<span class="title">default</span> <span class="title">shows</span> <span class="title">just</span> <span class="title">running</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">format</span> <span class="title">string</span>   <span class="title">Pretty</span>-<span class="title">print</span> <span class="title">images</span> <span class="title">using</span> <span class="title">a</span> <span class="title">Go</span> <span class="title">template</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">stream</span>       <span class="title">Disable</span> <span class="title">streaming</span> <span class="title">stats</span> <span class="title">and</span> <span class="title">only</span> <span class="title">pull</span> <span class="title">the</span> <span class="title">first</span> <span class="title">result</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">trunc</span>        <span class="title">Do</span> <span class="title">not</span> <span class="title">truncate</span> <span class="title">output</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker stats</span><br><span class="line">CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT   MEM %               <span class="built_in">NET</span> I/O             BLOCK I/O           PIDS</span><br><span class="line"><span class="number">7</span>d0e935b85a4        pensive_wiles       <span class="number">0</span>.<span class="number">01</span>%               <span class="number">71</span>.<span class="number">02</span>MiB / <span class="number">3</span>.<span class="number">7</span>GiB   <span class="number">1</span>.<span class="number">87</span>%               <span class="number">656</span>B / <span class="number">0</span>B           <span class="number">0</span>B / <span class="number">0</span>B             <span class="number">36</span></span><br></pre></td></tr></table></figure>

<h4 id="退出容器"><a href="#退出容器" class="headerlink" title="退出容器"></a>退出容器</h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">方式一：<span class="keyword">exit</span>  # 退出并关闭容器</span><br><span class="line">方式二：ctrl + p +q # 退出不关闭容器</span><br></pre></td></tr></table></figure>

<h4 id="重启容器-docker-restart-lt-容器ID-gt"><a href="#重启容器-docker-restart-lt-容器ID-gt" class="headerlink" title="重启容器  docker restart &lt;容器ID&gt;"></a>重启容器  <code>docker restart &lt;容器ID&gt;</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker restart --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">restart</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> [<span class="title">CONTAINER</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Restart</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">t</span>, --<span class="title">time</span> <span class="title">int</span>   <span class="title">Seconds</span> <span class="title">to</span> <span class="title">wait</span> <span class="title">for</span> <span class="title">stop</span> <span class="title">before</span> <span class="title">killing</span> <span class="title">the</span> <span class="title">container</span> (<span class="title">default</span> 10)</span></span><br></pre></td></tr></table></figure>

<h4 id="停止容器-docker-stop-lt-容器ID-gt"><a href="#停止容器-docker-stop-lt-容器ID-gt" class="headerlink" title="停止容器  docker stop &lt;容器ID&gt;"></a>停止容器  <code>docker stop &lt;容器ID&gt;</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker stop --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">stop</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> [<span class="title">CONTAINER</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Stop</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">running</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">t</span>, --<span class="title">time</span> <span class="title">int</span>   <span class="title">Seconds</span> <span class="title">to</span> <span class="title">wait</span> <span class="title">for</span> <span class="title">stop</span> <span class="title">before</span> <span class="title">killing</span> <span class="title">it</span> (<span class="title">default</span> 10)</span></span><br></pre></td></tr></table></figure>

<h4 id="杀掉容器-docker-kill-lt-容器ID-gt"><a href="#杀掉容器-docker-kill-lt-容器ID-gt" class="headerlink" title="杀掉容器 docker kill &lt;容器ID&gt;"></a>杀掉容器 <code>docker kill &lt;容器ID&gt;</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker kill --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">kill</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> [<span class="title">CONTAINER</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Kill</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">running</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">s</span>, --<span class="title">signal</span> <span class="title">string</span>   <span class="title">Signal</span> <span class="title">to</span> <span class="title">send</span> <span class="title">to</span> <span class="title">the</span> <span class="title">container</span> (<span class="title">default</span> "<span class="title">KILL</span>")</span></span><br></pre></td></tr></table></figure>

<p>删除已经停止的容器 <code>docker rm &lt;容器ID&gt;</code></p>
<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rm <span class="number">73</span>a82cd8d59e a32c2ed88835 <span class="number">50</span>f3a65f2219</span><br><span class="line"><span class="number">73</span>a82cd8d59e</span><br><span class="line">a32c2ed88835</span><br><span class="line"><span class="number">50</span>f3a65f2219</span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rm --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">rm</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> [<span class="title">CONTAINER</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Remove</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">force</span>     <span class="title">Force</span> <span class="title">the</span> <span class="title">removal</span> <span class="title">of</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span> (<span class="title">uses</span> <span class="title">SIGKILL</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">l</span>, --<span class="title">link</span>      <span class="title">Remove</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">link</span></span></span><br><span class="line"><span class="function">  -<span class="title">v</span>, --<span class="title">volumes</span>   <span class="title">Remove</span> <span class="title">anonymous</span> <span class="title">volumes</span> <span class="title">associated</span> <span class="title">with</span> <span class="title">the</span> <span class="title">container</span></span></span><br></pre></td></tr></table></figure>

<h4 id="删除容器-docker-rm-lt-容器-ID-gt"><a href="#删除容器-docker-rm-lt-容器-ID-gt" class="headerlink" title="删除容器 docker rm &lt;容器:ID&gt;"></a>删除容器 <code>docker rm &lt;容器:ID&gt;</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 删除一个</span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rm -f da2c804390fe</span><br><span class="line"></span><br><span class="line"># 一次删除多个</span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rm -f $(docker ps -qa)</span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker rm --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">rm</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> [<span class="title">CONTAINER</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Remove</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">force</span>     <span class="title">Force</span> <span class="title">the</span> <span class="title">removal</span> <span class="title">of</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span> (<span class="title">uses</span> <span class="title">SIGKILL</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">l</span>, --<span class="title">link</span>      <span class="title">Remove</span> <span class="title">the</span> <span class="title">specified</span> <span class="title">link</span></span></span><br><span class="line"><span class="function">  -<span class="title">v</span>, --<span class="title">volumes</span>   <span class="title">Remove</span> <span class="title">anonymous</span> <span class="title">volumes</span> <span class="title">associated</span> <span class="title">with</span> <span class="title">the</span> <span class="title">container</span></span></span><br></pre></td></tr></table></figure>

<h4 id="以守护进程启动容器"><a href="#以守护进程启动容器" class="headerlink" title="以守护进程启动容器"></a>以守护进程启动容器</h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker run -d centos /bin/sh -c "while true;<span class="keyword">do</span> <span class="built_in">echo</span> 'I Love You';sleep <span class="number">2</span>;done"</span><br><span class="line"><span class="number">3</span>eb5dffe30c62242faa89aa5c007cc65b475900f0ca034e32b71ed8918e153cf</span><br><span class="line"></span><br><span class="line"># 如果没有交互进程，容器启动后就会结束</span><br></pre></td></tr></table></figure>

<h4 id="查看容器内的进程-docker-top-lt-容器ID-gt"><a href="#查看容器内的进程-docker-top-lt-容器ID-gt" class="headerlink" title="查看容器内的进程  docker top &lt;容器ID&gt;"></a>查看容器内的进程  <code>docker top &lt;容器ID&gt;</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker top <span class="number">3</span>eb5dffe30c6</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 <span class="built_in">TIME</span>                <span class="built_in">CMD</span></span><br><span class="line">root                <span class="number">14938</span>               <span class="number">14920</span>               <span class="number">0</span>                   <span class="number">16</span>:<span class="number">36</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            /bin/sh -c while true;<span class="keyword">do</span> <span class="built_in">echo</span> 'I Love You';sleep <span class="number">2</span>;done</span><br><span class="line">root                <span class="number">16136</span>               <span class="number">14938</span>               <span class="number">0</span>                   <span class="number">16</span>:<span class="number">42</span>               ?                   <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>            /usr/bin/coreutils --coreutils-prog-shebang=sleep /usr/bin/sleep <span class="number">2</span></span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker top --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">top</span> <span class="title">CONTAINER</span> [<span class="title">ps</span> <span class="title">OPTIONS</span>]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Display</span> <span class="title">the</span> <span class="title">running</span> <span class="title">processes</span> <span class="title">of</span> <span class="title">a</span> <span class="title">container</span></span></span><br></pre></td></tr></table></figure>

<h4 id="查看容器日志-docker-logs-ft-lt-容器ID-gt"><a href="#查看容器日志-docker-logs-ft-lt-容器ID-gt" class="headerlink" title="查看容器日志  docker logs -ft &lt;容器ID&gt;"></a>查看容器日志  <code>docker logs -ft &lt;容器ID&gt;</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker logs --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">logs</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Fetch</span> <span class="title">the</span> <span class="title">logs</span> <span class="title">of</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">details</span>        <span class="title">Show</span> <span class="title">extra</span> <span class="title">details</span> <span class="title">provided</span> <span class="title">to</span> <span class="title">logs</span></span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">follow</span>         <span class="title">Follow</span> <span class="title">log</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">      --<span class="title">since</span> <span class="title">string</span>   <span class="title">Show</span> <span class="title">logs</span> <span class="title">since</span> <span class="title">timestamp</span> (<span class="title">e.g</span>. 2013-01-02<span class="title">T13</span>:23:37) <span class="title">or</span> <span class="title">relative</span> (<span class="title">e.g</span>. 42<span class="title">m</span> <span class="title">for</span> 42 <span class="title">minutes</span>)</span></span><br><span class="line"><span class="function">      --<span class="title">tail</span> <span class="title">string</span>    <span class="title">Number</span> <span class="title">of</span> <span class="title">lines</span> <span class="title">to</span> <span class="title">show</span> <span class="title">from</span> <span class="title">the</span> <span class="title">end</span> <span class="title">of</span> <span class="title">the</span> <span class="title">logs</span> (<span class="title">default</span> "<span class="title">all</span>")</span></span><br><span class="line"><span class="function">  -<span class="title">t</span>, --<span class="title">timestamps</span>     <span class="title">Show</span> <span class="title">timestamps</span></span></span><br><span class="line"><span class="function">      --<span class="title">until</span> <span class="title">string</span>   <span class="title">Show</span> <span class="title">logs</span> <span class="title">before</span> <span class="title">a</span> <span class="title">timestamp</span> (<span class="title">e.g</span>. 2013-01-02<span class="title">T13</span>:23:37) <span class="title">or</span> <span class="title">relative</span> (<span class="title">e.g</span>. 42<span class="title">m</span> <span class="title">for</span> 42 <span class="title">minutes</span>)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker logs -ft --tail <span class="number">5</span> <span class="number">7</span>d0e935b85a4</span><br></pre></td></tr></table></figure>

<h4 id="查看容器内的细节-docker-inspect-lt-容器ID-gt"><a href="#查看容器内的细节-docker-inspect-lt-容器ID-gt" class="headerlink" title="查看容器内的细节 docker inspect &lt;容器ID&gt;"></a>查看容器内的细节 <code>docker inspect &lt;容器ID&gt;</code></h4><h4 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h4><h5 id="docker-attach-lt-容器ID-gt"><a href="#docker-attach-lt-容器ID-gt" class="headerlink" title="docker attach &lt;容器ID&gt;"></a><code>docker attach &lt;容器ID&gt;</code></h5><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker attach --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">attach</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Attach</span> <span class="title">local</span> <span class="title">standard</span> <span class="title">input</span>, <span class="title">output</span>, <span class="title">and</span> <span class="title">error</span> <span class="title">streams</span> <span class="title">to</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">detach</span>-<span class="title">keys</span> <span class="title">string</span>   <span class="title">Override</span> <span class="title">the</span> <span class="title">key</span> <span class="title">sequence</span> <span class="title">for</span> <span class="title">detaching</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">stdin</span>             <span class="title">Do</span> <span class="title">not</span> <span class="title">attach</span> <span class="title">STDIN</span></span></span><br><span class="line"><span class="function">      --<span class="title">sig</span>-<span class="title">proxy</span>            <span class="title">Proxy</span> <span class="title">all</span> <span class="title">received</span> <span class="title">signals</span> <span class="title">to</span> <span class="title">the</span> <span class="title">process</span> (<span class="title">default</span> <span class="title">true</span>)</span></span><br></pre></td></tr></table></figure>

<p>注：docker attach可以attach到一个已经运行的容器的stdin，然后进行命令执行的动作。<br>但是需要注意的是，如果从这个stdin中exit，会导致容器的停止。</p>
<h5 id="docker-exec-t-lt-容器ID-gt-lt-cmd-gt"><a href="#docker-exec-t-lt-容器ID-gt-lt-cmd-gt" class="headerlink" title="docker exec -t &lt;容器ID&gt; &lt;cmd&gt;"></a><code>docker exec -t &lt;容器ID&gt; &lt;cmd&gt;</code></h5><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">exec</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER</span> <span class="title">COMMAND</span> [<span class="title">ARG</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Run</span> <span class="title">a</span> <span class="title">command</span> <span class="title">in</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">d</span>, --<span class="title">detach</span>               <span class="title">Detached</span> <span class="title">mode</span>: <span class="title">run</span> <span class="title">command</span> <span class="title">in</span> <span class="title">the</span> <span class="title">background</span></span></span><br><span class="line"><span class="function">      --<span class="title">detach</span>-<span class="title">keys</span> <span class="title">string</span>   <span class="title">Override</span> <span class="title">the</span> <span class="title">key</span> <span class="title">sequence</span> <span class="title">for</span> <span class="title">detaching</span> <span class="title">a</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  -<span class="title">e</span>, --<span class="title">env</span> <span class="title">list</span>             <span class="title">Set</span> <span class="title">environment</span> <span class="title">variables</span></span></span><br><span class="line"><span class="function">  -<span class="title">i</span>, --<span class="title">interactive</span>          <span class="title">Keep</span> <span class="title">STDIN</span> <span class="title">open</span> <span class="title">even</span> <span class="title">if</span> <span class="title">not</span> <span class="title">attached</span></span></span><br><span class="line"><span class="function">      --<span class="title">privileged</span>           <span class="title">Give</span> <span class="title">extended</span> <span class="title">privileges</span> <span class="title">to</span> <span class="title">the</span> <span class="title">command</span></span></span><br><span class="line"><span class="function">  -<span class="title">t</span>, --<span class="title">tty</span>                  <span class="title">Allocate</span> <span class="title">a</span> <span class="title">pseudo</span>-<span class="title">TTY</span></span></span><br><span class="line"><span class="function">  -<span class="title">u</span>, --<span class="title">user</span> <span class="title">string</span>          <span class="title">Username</span> <span class="title">or</span> <span class="title">UID</span> (<span class="title">format</span>: &lt;<span class="title">name</span>|<span class="title">uid</span>&gt;[:&lt;<span class="title">group</span>|<span class="title">gid</span>&gt;])</span></span><br><span class="line"><span class="function">  -<span class="title">w</span>, --<span class="title">workdir</span> <span class="title">string</span>       <span class="title">Working</span> <span class="title">directory</span> <span class="title">inside</span> <span class="title">the</span> <span class="title">container</span></span></span><br></pre></td></tr></table></figure>

<h4 id="copy容器内的数据到本地"><a href="#copy容器内的数据到本地" class="headerlink" title="copy容器内的数据到本地"></a>copy容器内的数据到本地</h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker cp --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">cp</span> [<span class="title">OPTIONS</span>] <span class="title">CONTAINER:SRC_PATH</span> <span class="title">DEST_PATH</span>|-</span></span><br><span class="line"><span class="function">        <span class="title">docker</span> <span class="title">cp</span> [<span class="title">OPTIONS</span>] <span class="title">SRC_PATH</span>|- <span class="title">CONTAINER:DEST_PATH</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Copy</span> <span class="title">files</span>/<span class="title">folders</span> <span class="title">between</span> <span class="title">a</span> <span class="title">container</span> <span class="title">and</span> <span class="title">the</span> <span class="title">local</span> <span class="title">filesystem</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Use</span> '-' <span class="title">as</span> <span class="title">the</span> <span class="title">source</span> <span class="title">to</span> <span class="title">read</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span> <span class="title">from</span> <span class="title">stdin</span></span></span><br><span class="line"><span class="function"><span class="title">and</span> <span class="title">extract</span> <span class="title">it</span> <span class="title">to</span> <span class="title">a</span> <span class="title">directory</span> <span class="title">destination</span> <span class="title">in</span> <span class="title">a</span> <span class="title">container</span>.</span></span><br><span class="line"><span class="function"><span class="title">Use</span> '-' <span class="title">as</span> <span class="title">the</span> <span class="title">destination</span> <span class="title">to</span> <span class="title">stream</span> <span class="title">a</span> <span class="title">tar</span> <span class="title">archive</span> <span class="title">of</span> <span class="title">a</span></span></span><br><span class="line"><span class="function"><span class="title">container</span> <span class="title">source</span> <span class="title">to</span> <span class="title">stdout</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">a</span>, --<span class="title">archive</span>       <span class="title">Archive</span> <span class="title">mode</span> (<span class="title">copy</span> <span class="title">all</span> <span class="title">uid</span>/<span class="title">gid</span> <span class="title">information</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">L</span>, --<span class="title">follow</span>-<span class="title">link</span>   <span class="title">Always</span> <span class="title">follow</span> <span class="title">symbol</span> <span class="title">link</span> <span class="title">in</span> <span class="title">SRC_PATH</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Docker-网络命令-docker-network-lt-opts-gt"><a href="#Docker-网络命令-docker-network-lt-opts-gt" class="headerlink" title="Docker 网络命令 docker network &lt;opts&gt;"></a>Docker 网络命令 <code>docker network &lt;opts&gt;</code></h3><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">network</span> <span class="title">COMMAND</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Manage</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">connect</span>     <span class="title">Connect</span> <span class="title">a</span> <span class="title">container</span> <span class="title">to</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">  <span class="title">create</span>      <span class="title">Create</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">  <span class="title">disconnect</span>  <span class="title">Disconnect</span> <span class="title">a</span> <span class="title">container</span> <span class="title">from</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">  <span class="title">inspect</span>     <span class="title">Display</span> <span class="title">detailed</span> <span class="title">information</span> <span class="title">on</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function">  <span class="title">ls</span>          <span class="title">List</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function">  <span class="title">prune</span>       <span class="title">Remove</span> <span class="title">all</span> <span class="title">unused</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function">  <span class="title">rm</span>          <span class="title">Remove</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Run</span> '<span class="title">docker</span> <span class="title">network</span> <span class="title">COMMAND</span> --<span class="title">help</span>' <span class="title">for</span> <span class="title">more</span> <span class="title">information</span> <span class="title">on</span> <span class="title">a</span> <span class="title">command</span>.</span></span><br></pre></td></tr></table></figure>

<h4 id="查看network列表-docker-network-ls"><a href="#查看network列表-docker-network-ls" class="headerlink" title="查看network列表 docker network ls"></a>查看network列表 <code>docker network ls</code></h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line"><span class="number">5</span>aa8673629ff        bridge              bridge              local</span><br><span class="line"><span class="number">8793</span>af47e9b0        host                host                local</span><br><span class="line">d6dd4ae716a8        none                null                local</span><br></pre></td></tr></table></figure>

<h4 id="查看network详情-docker-network-inspect-lt-networkID-gt"><a href="#查看network详情-docker-network-inspect-lt-networkID-gt" class="headerlink" title="查看network详情 docker network inspect &lt;networkID&gt;"></a>查看network详情 <code>docker network inspect &lt;networkID&gt;</code></h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network inspect <span class="number">5</span>aa8673629ff</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        "Name": "bridge",</span><br><span class="line">        "Id": "<span class="number">5</span>aa8673629ffd516f43f87d3d082f4288cf7a72526f82aaedc04772ab501ae9f",</span><br><span class="line">        "Created": "<span class="number">2020</span>-<span class="number">12</span>-<span class="number">19</span>T21:<span class="number">17</span>:<span class="number">37</span>.<span class="number">224915641</span>+<span class="number">08</span>:<span class="number">00</span>",</span><br><span class="line">        "Scope": "local",</span><br><span class="line">        "Driver": "bridge",</span><br><span class="line">        "EnableIPv6": false,</span><br><span class="line">        "IPAM": &#123;</span><br><span class="line">            "Driver": "default",</span><br><span class="line">            "Options": null,</span><br><span class="line">            "Config": [</span><br><span class="line">                &#123;</span><br><span class="line">                    "Subnet": "<span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">0</span>/<span class="number">16</span>",</span><br><span class="line">                    "Gateway": "<span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">1</span>"</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        "Internal": false,</span><br><span class="line">        "Attachable": false,</span><br><span class="line">        "Ingress": false,</span><br><span class="line">        "ConfigFrom": &#123;</span><br><span class="line">            "Network": ""</span><br><span class="line">        &#125;,</span><br><span class="line">        "ConfigOnly": false,</span><br><span class="line">        "Containers": &#123;</span><br><span class="line">            "<span class="number">6</span>c3c46cca05b59d60df1c2fa8cb58a6d7a57e3963a01baa2de7275c44f83824f": &#123;</span><br><span class="line">                "Name": "tomcat2",</span><br><span class="line">                "EndpointID": "f867dafc7f8d5805e89fe2861e33a1aa8f38783ab042d0641f79d2ba529b682e",</span><br><span class="line">                "MacAddress": "<span class="number">02</span>:<span class="number">42</span>:ac:<span class="number">11</span>:<span class="number">00</span>:<span class="number">03</span>",</span><br><span class="line">                "IPv4Address": "<span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">3</span>/<span class="number">16</span>",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "<span class="number">8615</span>f51616f391c460e30843d4258c2c3b9a26719b7deed8e7ad642094d7595f": &#123;</span><br><span class="line">                "Name": "tomcat3",</span><br><span class="line">                "EndpointID": "<span class="number">99</span>a3cb6a218738d9c3e92657b5bacd0223f07acc0929095da4c4e74588017096",</span><br><span class="line">                "MacAddress": "<span class="number">02</span>:<span class="number">42</span>:ac:<span class="number">11</span>:<span class="number">00</span>:<span class="number">04</span>",</span><br><span class="line">                "IPv4Address": "<span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">4</span>/<span class="number">16</span>",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;,</span><br><span class="line">            "<span class="number">8</span>d1699a2171254b871cabe8017c5a84fe8870b581989dfed2517e291619cb78d": &#123;</span><br><span class="line">                "Name": "tomcat1",</span><br><span class="line">                "EndpointID": "d14d7f0375f1a76eb7500faab0ed29a94f1b914f51ab5619ad224cc2398a4509",</span><br><span class="line">                "MacAddress": "<span class="number">02</span>:<span class="number">42</span>:ac:<span class="number">11</span>:<span class="number">00</span>:<span class="number">02</span>",</span><br><span class="line">                "IPv4Address": "<span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">2</span>/<span class="number">16</span>",</span><br><span class="line">                "IPv6Address": ""</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        "Options": &#123;</span><br><span class="line">            "com.docker.network.bridge.default_bridge": "true",</span><br><span class="line">            "com.docker.network.bridge.enable_icc": "true",</span><br><span class="line">            "com.docker.network.bridge.enable_ip_masquerade": "true",</span><br><span class="line">            "com.docker.network.bridge.host_binding_ipv4": "<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>",</span><br><span class="line">            "com.docker.network.bridge.name": "docker0",</span><br><span class="line">            "com.docker.network.driver.mtu": "<span class="number">1500</span>"</span><br><span class="line">        &#125;,</span><br><span class="line">        "Labels": &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="Docker镜像"><a href="#Docker镜像" class="headerlink" title="Docker镜像"></a>Docker镜像</h2><p>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需要的所有内容，包括代码、运行时、库、环境变量和配置文件等</p>
<h3 id="Docker联合文件系统Union-File-System"><a href="#Docker联合文件系统Union-File-System" class="headerlink" title="Docker联合文件系统Union File System"></a>Docker联合文件系统Union File System</h3><p>Docker联合文件系统(Union File System)，它是实现Docker镜像的技术基础，是一种轻量级的高性能分层文件系统，支持将文件系统中的修改进行提交和层层叠加，这个特性使得镜像可以通过分层实现和继承。同时支持将不同目录挂载到同一个虚拟文件系统下。</p>
<p>在Docker镜像分为基础镜像和父镜像，没有父镜像的镜像被称为基础镜像。用户是基于基础镜像来制作各种不同的应用镜像。这些应用镜像共享同一个基础镜像层，提高了存储效率。</p>
<p><strong>特性：一次同时加载多个文件系统，但从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录</strong>.</p>
<h3 id="Docker镜像加载原理"><a href="#Docker镜像加载原理" class="headerlink" title="Docker镜像加载原理"></a>Docker镜像加载原理</h3><p>在Docker中使用AUFS(Another Union File System或Advanced Multilayered Unification File System)就是一种联合文件系统。AUFS不仅可以对每一个目录设定只读(Readonly)、读写(Readwrite)和写(Witeout-able)权限，同时AUFS也可以支持分层的机制，例如，可以对只读权限部分逻辑上进行增量地修改而不影响只读部分。</p>
<p>docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统称之为UnionFS。从linux启动为例介绍docker在AUFS特性的运用。典型的Linux启动到运行需要两个FileSystem，BootFS 和RootFS。</p>
<p><strong>BootFS</strong> (boot file system)主要包含BootLoader 和Kernel， BootLoader主要是引导加载Kernel，Linux刚启动时会加载bootfs文件系统，在Docker镜像的最底层是bootfs。当Boot成功后，Kernel被加载到内存中BootFS就被Umount了。</p>
<p><strong>RootFS</strong> (root file system)包含的就是典型 Linux 系统中的 /dev、/proc、/bin 等标准目录和文件。rootfs就是各种不同的操作系统发行版，比如Ubuntu，Centos等等。</p>
<p><strong>不同的linux发行版，BootFS基本是一致的, RootFS会有差别，因此不同的发行版可以共享BootFS。</strong></p>
<p>Docker镜像都是只读的，当容器启动时，一个新的可写层被加载到镜像的顶部。这一层通常被称作“容器层”，“容器层”之下的都叫“镜像层”。</p>
<h2 id="Docker容器数据卷"><a href="#Docker容器数据卷" class="headerlink" title="Docker容器数据卷"></a>Docker容器数据卷</h2><p>在Docker容器的实际使用中，经常会遇到容器的数据持久化，容器之间的数据共享等问题，通常我们有两种解决方案：</p>
<p><strong>1)数据卷（Data Volumes）</strong>：就是将容器内数据直接映射到本地主机环境的指定文件目录之中，可以理解为容器挂载一个虚拟数据卷然后映射到一个主机目录中</p>
<p><strong>2)数据卷容器（Data Volume Containers）</strong>：用专门的容器来挂载数据卷，其他容器通过挂载这个父容器来实现数据共享，这个专门挂载数据卷的容器就是数据卷容器，简单的总结就是有一个容器来专门管理数据的持久化和容器之间数据共享</p>
<p>注：前者常用于单一容器数据持久化，后者常用于多容器之间的数据共享和数据持久化</p>
<h3 id="数据卷（Data-Volumes）"><a href="#数据卷（Data-Volumes）" class="headerlink" title="数据卷（Data Volumes）"></a>数据卷（Data Volumes）</h3><p>我们可以在镜像程序运行时通过”-v /主机目录文件名:/容器目录名” 命令，将容器卷指定一个主机目录，这样我们的程序运行的数据就可以持久保存到这个映射的主机目录文件当中。</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v /root/examples:/usr/local/tomcat/webapps/examples:[ro] -p <span class="number">9000</span>:<span class="number">8080</span> tomcat:<span class="number">8</span>.<span class="number">5</span>.<span class="number">32</span></span><br><span class="line"></span><br><span class="line"># [ro] 表示只有读的权限，默认是具有读写权限</span><br></pre></td></tr></table></figure>

<p>特点：</p>
<ul>
<li>数据卷可以在容器之间共享或重用数据</li>
<li>数据卷中的更改可以直接生效</li>
<li>数据卷中的更改不会包含在镜像的更新中</li>
<li>数据卷的生命周期一直持续到没有容器使用它为止</li>
</ul>
<h3 id="数据卷容器（Data-Volume-Containers）"><a href="#数据卷容器（Data-Volume-Containers）" class="headerlink" title="数据卷容器（Data Volume Containers）"></a>数据卷容器（Data Volume Containers）</h3><p>如我我们经常需要多个容器之间进行数据共享我们需要用到命令“–volumes-from”</p>
<p>1）我们从仓库拉一个centos的容器镜像</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\$ docker pull centos</span><br></pre></td></tr></table></figure>

<p>2）然后运行这个镜像并创建一个数据卷挂载到/mydata</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">\$ docker run -it -v /mydata --name mycentos centos</span><br></pre></td></tr></table></figure>

<p>3）再运行两个容器，在这两个容器中使用–volumes-from来挂载mycentos容器中的数据卷.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\$ docker run -it --volumes-from mycentos --name soncentos1 centos</span><br><span class="line"></span><br><span class="line">\$ docker run -it --volumes-from mycentos --name soncentos2 centos</span><br></pre></td></tr></table></figure>

<p>此时，容器soncentos1和soncentos2都挂载同一个数据卷到相同的/mydata 目录。三个容器任何一方在该目录下的写入数据，其他容器都可以看到。</p>
<p>注：可以多次使用–volumes-from参数来从多个容器挂载多个数据卷。还可以从其他已经挂载了容器卷的容器来挂载数据卷。<br>使用–volumes-from参数所挂载数据卷的容器自身并不需要保持在运行状态。<br>如果删除了挂载的容器（包括dbdata、db1和db2），数据卷并不会被自动删除。如果要删除一个数据卷，必须在删除最后一个还挂载着它的容器时显式使用docker rm -v命令来指定同时删除关联的容器。</p>
<h2 id="DockerFile解析"><a href="#DockerFile解析" class="headerlink" title="DockerFile解析"></a>DockerFile解析</h2><p>Dockerfile 是一个用来构建镜像的，有一系列命令和参数组成的文本文件。</p>
<p><code>docker build</code>命令用于从Dockerfile构建映像。可以在<code>docker build</code>命令中使用<code>-f</code>标志指向文件系统中任何位置的Dockerfile。例：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker build -f /<span class="built_in">path</span>/to/a/Dockerfile</span><br></pre></td></tr></table></figure>

<h3 id="DockerFile内容基本知识"><a href="#DockerFile内容基本知识" class="headerlink" title="DockerFile内容基本知识"></a>DockerFile内容基本知识</h3><ul>
<li>每条保留字指令都必须为大写字母且后面至少需要一个参数</li>
<li>指令是自上而下顺序执行</li>
<li><code>#</code>表示注释</li>
<li>每条指令都会创建一个新的镜像层，并对镜像进行提交</li>
</ul>
<h3 id="DockerFile执行的流程"><a href="#DockerFile执行的流程" class="headerlink" title="DockerFile执行的流程"></a>DockerFile执行的流程</h3><ul>
<li>docker 从基础镜像运行一个容器</li>
<li>执行一条指令并对容器作出修改</li>
<li>执行类似docker commit的操作提交一个新的镜像层</li>
<li>docker再基于刚提交的镜像运行一个新容器</li>
<li>执行DockerFile中的下一条指令制导所有指令都执行完成</li>
</ul>
<h3 id="DockerFile中的关键字"><a href="#DockerFile中的关键字" class="headerlink" title="DockerFile中的关键字"></a>DockerFile中的关键字</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">FROM：指定创建镜像的基础镜像</span><br><span class="line">MAINTAINER：Dockerfile作者信息，一般写的是联系方式</span><br><span class="line">RUN：运行Linux系统的命令使用</span><br><span class="line"><span class="built_in">CMD</span>：指定容器启动执行的命令；启动容器中的服务</span><br><span class="line"><span class="built_in">LABEL</span>：指定生成镜像的源数据标签</span><br><span class="line">EXPOSE：指定镜像容器监听端口号；发布服务使用</span><br><span class="line">ENV：使用环境变量</span><br><span class="line">ADD：对压缩文件进行解压缩；将数据移动到指定的目录</span><br><span class="line"><span class="built_in">COPY</span>：复制宿主机数据到镜像内部使用</span><br><span class="line">WORKDIR：切换到镜像容器中的指定目录中</span><br><span class="line">VOLUME：挂载数据卷到镜像容器中</span><br><span class="line">USER：指定运行容器的用户</span><br><span class="line">ARG：指定镜像的版本号信息</span><br><span class="line">ONBUILD：创建镜像，作为其他镜像的基础镜像运行操作指令</span><br><span class="line">ENTRYPOINT：指定运行容器启动过程执行命令，覆盖<span class="built_in">CMD</span>参数</span><br></pre></td></tr></table></figure>

<p>参考：<a href="https://blog.51cto.com/14156658/2497164" target="_blank" rel="noopener">Dockerfile文件详解</a></p>
<h2 id="Docker-常用安装"><a href="#Docker-常用安装" class="headerlink" title="Docker 常用安装"></a>Docker 常用安装</h2><h2 id="Docker-网络"><a href="#Docker-网络" class="headerlink" title="Docker 网络"></a>Docker 网络</h2><ul>
<li>启动tomcat1</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker run -d -p <span class="number">9000</span>:<span class="number">8080</span> --name tomcat1 tomcat:<span class="number">8</span>.<span class="number">5</span>.<span class="number">32</span></span><br><span class="line"><span class="number">8</span>d1699a2171254b871cabe8017c5a84fe8870b581989dfed2517e291619cb78d</span><br></pre></td></tr></table></figure>

<p>网络信息</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec -i tomcat1 ip addr</span><br><span class="line"><span class="number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1000</span></span><br><span class="line">    link/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    inet <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">46</span>: eth0@if47: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    link/ether <span class="number">02</span>:<span class="number">42</span>:ac:<span class="number">11</span>:<span class="number">00</span>:<span class="number">02</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br><span class="line">    inet <span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">2</span>/<span class="number">16</span> brd <span class="number">172</span>.<span class="number">17</span>.<span class="number">255</span>.<span class="number">255</span> scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<ul>
<li>启动tomcat2</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker run -d -p <span class="number">9001</span>:<span class="number">8080</span> --name tomcat2 tomcat:<span class="number">8</span>.<span class="number">5</span>.<span class="number">32</span></span><br><span class="line"><span class="number">6</span>c3c46cca05b59d60df1c2fa8cb58a6d7a57e3963a01baa2de7275c44f83824f</span><br></pre></td></tr></table></figure>

<p>网络信息</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec tomcat2 ip addr</span><br><span class="line"><span class="number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1000</span></span><br><span class="line">    link/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    inet <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">48</span>: eth0@if49: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    link/ether <span class="number">02</span>:<span class="number">42</span>:ac:<span class="number">11</span>:<span class="number">00</span>:<span class="number">03</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br><span class="line">    inet <span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">3</span>/<span class="number">16</span> brd <span class="number">172</span>.<span class="number">17</span>.<span class="number">255</span>.<span class="number">255</span> scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<ul>
<li>当前主机的网络信息</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# ip addr</span><br><span class="line"><span class="number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1000</span></span><br><span class="line">    link/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    inet <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::<span class="number">1</span>/<span class="number">128</span> scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">2</span>: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc pfifo_fast state UP group default qlen <span class="number">1000</span></span><br><span class="line">    link/ether <span class="number">52</span>:<span class="number">54</span>:f5:ea:df:<span class="number">91</span> brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet <span class="number">10</span>.<span class="number">57</span>.<span class="number">21</span>.<span class="number">158</span>/<span class="number">24</span> brd <span class="number">10</span>.<span class="number">57</span>.<span class="number">21</span>.<span class="number">255</span> scope global noprefixroute dynamic eth0</span><br><span class="line">       valid_lft <span class="number">40</span>sec preferred_lft <span class="number">40</span>sec</span><br><span class="line">    inet6 fe80::<span class="number">696</span>e:<span class="number">9</span>fd9:b517:<span class="number">3</span>e9d/<span class="number">64</span> scope link noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">3</span>: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    link/ether <span class="number">02</span>:<span class="number">42</span>:<span class="number">4</span>e:b2:<span class="number">8</span>d:e0 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet <span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">16</span> brd <span class="number">172</span>.<span class="number">17</span>.<span class="number">255</span>.<span class="number">255</span> scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::<span class="number">42</span>:<span class="number">4</span>eff:feb2:<span class="number">8</span>de0/<span class="number">64</span> scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">47</span>: vethe9abbf1@if46: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master docker0 state UP group default</span><br><span class="line">    link/ether b6:b1:<span class="number">27</span>:<span class="number">4</span>e:<span class="number">68</span>:<span class="number">81</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br><span class="line">    inet6 fe80::b4b1:<span class="number">27</span>ff:fe4e:<span class="number">6881</span>/<span class="number">64</span> scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">49</span>: vethefc90f6@if48: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue master docker0 state UP group default</span><br><span class="line">    link/ether ae:<span class="number">86</span>:ee:f0:<span class="number">23</span>:<span class="number">35</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">1</span></span><br><span class="line">    inet6 fe80::ac86:eeff:fef0:<span class="number">2335</span>/<span class="number">64</span> scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h3 id="Docker-网络模式"><a href="#Docker-网络模式" class="headerlink" title="Docker 网络模式"></a>Docker 网络模式</h3><ul>
<li>bridge：桥接（默认）</li>
<li>none：不配置网络</li>
<li>host：和宿主机共享网络</li>
<li>container：容器网络连同</li>
</ul>
<h3 id="查看网络列表-docker-network-ls"><a href="#查看网络列表-docker-network-ls" class="headerlink" title="查看网络列表 docker network ls"></a>查看网络列表 <code>docker network ls</code></h3><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network ls --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">network</span> <span class="title">ls</span> [<span class="title">OPTIONS</span>]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">List</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Aliases</span>:</span></span><br><span class="line"><span class="function">  <span class="title">ls</span>, <span class="title">list</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">filter</span> <span class="title">filter</span>   <span class="title">Provide</span> <span class="title">filter</span> <span class="title">values</span> (<span class="title">e.g</span>. '<span class="title">driver</span>=<span class="title">bridge</span>')</span></span><br><span class="line"><span class="function">      --<span class="title">format</span> <span class="title">string</span>   <span class="title">Pretty</span>-<span class="title">print</span> <span class="title">networks</span> <span class="title">using</span> <span class="title">a</span> <span class="title">Go</span> <span class="title">template</span></span></span><br><span class="line"><span class="function">      --<span class="title">no</span>-<span class="title">trunc</span>        <span class="title">Do</span> <span class="title">not</span> <span class="title">truncate</span> <span class="title">the</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">  -<span class="title">q</span>, --<span class="title">quiet</span>           <span class="title">Only</span> <span class="title">display</span> <span class="title">network</span> <span class="title">IDs</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line"><span class="number">5</span>aa8673629ff        bridge              bridge              local</span><br><span class="line"><span class="number">8793</span>af47e9b0        host                host                local</span><br><span class="line">d6dd4ae716a8        none                null                local</span><br></pre></td></tr></table></figure>

<h3 id="查看网络详情-docker-network-inspect-lt-networkID-gt"><a href="#查看网络详情-docker-network-inspect-lt-networkID-gt" class="headerlink" title="查看网络详情 docker network inspect &lt;networkID&gt;"></a>查看网络详情 <code>docker network inspect &lt;networkID&gt;</code></h3><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network inspect --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">network</span> <span class="title">inspect</span> [<span class="title">OPTIONS</span>] <span class="title">NETWORK</span> [<span class="title">NETWORK</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Display</span> <span class="title">detailed</span> <span class="title">information</span> <span class="title">on</span> <span class="title">one</span> <span class="title">or</span> <span class="title">more</span> <span class="title">networks</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">format</span> <span class="title">string</span>   <span class="title">Format</span> <span class="title">the</span> <span class="title">output</span> <span class="title">using</span> <span class="title">the</span> <span class="title">given</span> <span class="title">Go</span> <span class="title">template</span></span></span><br><span class="line"><span class="function">  -<span class="title">v</span>, --<span class="title">verbose</span>         <span class="title">Verbose</span> <span class="title">output</span> <span class="title">for</span> <span class="title">diagnostics</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network inspect <span class="number">5</span>aa8673629ff</span><br></pre></td></tr></table></figure>

<h3 id="创建网络-docker-network-create-opts"><a href="#创建网络-docker-network-create-opts" class="headerlink" title="创建网络 docker network create [opts]"></a>创建网络 <code>docker network create [opts]</code></h3><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network create --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">network</span> <span class="title">create</span> [<span class="title">OPTIONS</span>] <span class="title">NETWORK</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Create</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">attachable</span>           <span class="title">Enable</span> <span class="title">manual</span> <span class="title">container</span> <span class="title">attachment</span></span></span><br><span class="line"><span class="function">      --<span class="title">aux</span>-<span class="title">address</span> <span class="title">map</span>      <span class="title">Auxiliary</span> <span class="title">IPv4</span> <span class="title">or</span> <span class="title">IPv6</span> <span class="title">addresses</span> <span class="title">used</span> <span class="title">by</span> <span class="title">Network</span> <span class="title">driver</span> (<span class="title">default</span> <span class="title">map</span>[])</span></span><br><span class="line"><span class="function">      --<span class="title">config</span>-<span class="title">from</span> <span class="title">string</span>   <span class="title">The</span> <span class="title">network</span> <span class="title">from</span> <span class="title">which</span> <span class="title">copying</span> <span class="title">the</span> <span class="title">configuration</span></span></span><br><span class="line"><span class="function">      --<span class="title">config</span>-<span class="title">only</span>          <span class="title">Create</span> <span class="title">a</span> <span class="title">configuration</span> <span class="title">only</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">  -<span class="title">d</span>, --<span class="title">driver</span> <span class="title">string</span>        <span class="title">Driver</span> <span class="title">to</span> <span class="title">manage</span> <span class="title">the</span> <span class="title">Network</span> (<span class="title">default</span> "<span class="title">bridge</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">gateway</span> <span class="title">strings</span>      <span class="title">IPv4</span> <span class="title">or</span> <span class="title">IPv6</span> <span class="title">Gateway</span> <span class="title">for</span> <span class="title">the</span> <span class="title">master</span> <span class="title">subnet</span></span></span><br><span class="line"><span class="function">      --<span class="title">ingress</span>              <span class="title">Create</span> <span class="title">swarm</span> <span class="title">routing</span>-<span class="title">mesh</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">      --<span class="title">internal</span>             <span class="title">Restrict</span> <span class="title">external</span> <span class="title">access</span> <span class="title">to</span> <span class="title">the</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">      --<span class="title">ip</span>-<span class="title">range</span> <span class="title">strings</span>     <span class="title">Allocate</span> <span class="title">container</span> <span class="title">ip</span> <span class="title">from</span> <span class="title">a</span> <span class="title">sub</span>-<span class="title">range</span></span></span><br><span class="line"><span class="function">      --<span class="title">ipam</span>-<span class="title">driver</span> <span class="title">string</span>   <span class="title">IP</span> <span class="title">Address</span> <span class="title">Management</span> <span class="title">Driver</span> (<span class="title">default</span> "<span class="title">default</span>")</span></span><br><span class="line"><span class="function">      --<span class="title">ipam</span>-<span class="title">opt</span> <span class="title">map</span>         <span class="title">Set</span> <span class="title">IPAM</span> <span class="title">driver</span> <span class="title">specific</span> <span class="title">options</span> (<span class="title">default</span> <span class="title">map</span>[])</span></span><br><span class="line"><span class="function">      --<span class="title">ipv6</span>                 <span class="title">Enable</span> <span class="title">IPv6</span> <span class="title">networking</span></span></span><br><span class="line"><span class="function">      --<span class="title">label</span> <span class="title">list</span>           <span class="title">Set</span> <span class="title">metadata</span> <span class="title">on</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">  -<span class="title">o</span>, --<span class="title">opt</span> <span class="title">map</span>              <span class="title">Set</span> <span class="title">driver</span> <span class="title">specific</span> <span class="title">options</span> (<span class="title">default</span> <span class="title">map</span>[])</span></span><br><span class="line"><span class="function">      --<span class="title">scope</span> <span class="title">string</span>         <span class="title">Control</span> <span class="title">the</span> <span class="title">network</span>'<span class="title">s</span> <span class="title">scope</span></span></span><br><span class="line"><span class="function">      --<span class="title">subnet</span> <span class="title">strings</span>       <span class="title">Subnet</span> <span class="title">in</span> <span class="title">CIDR</span> <span class="title">format</span> <span class="title">that</span> <span class="title">represents</span> <span class="title">a</span> <span class="title">network</span> <span class="title">segment</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network create --driver bridge --subnet <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">0</span>/<span class="number">16</span> --gateway <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">1</span> mynet</span><br><span class="line"><span class="number">2</span>dc7d8dc168cc70f18b0810b1af1f82a8f89471b6931d684224ae835c4f6f541</span><br><span class="line"></span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network ls</span><br><span class="line">NETWORK ID          NAME                DRIVER              SCOPE</span><br><span class="line"><span class="number">5</span>aa8673629ff        bridge              bridge              local</span><br><span class="line"><span class="number">8793</span>af47e9b0        host                host                local</span><br><span class="line"><span class="number">2</span>dc7d8dc168c        mynet               bridge              local</span><br><span class="line">d6dd4ae716a8        none                null                local</span><br></pre></td></tr></table></figure>

<p>使用自定义的网络创建容器</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker run -d -p <span class="number">9010</span>:<span class="number">8080</span> --name tomcat-net1 --<span class="built_in">net</span> mynet  tomcat:<span class="number">8</span>.<span class="number">5</span>.<span class="number">32</span></span><br><span class="line">d02b191f7db4995af4e69237f1a797b2bee2d5324cd9022ccf328879701a20bf</span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker run -d -p <span class="number">9011</span>:<span class="number">8080</span> --name tomcat-net2 --<span class="built_in">net</span> mynet  tomcat:<span class="number">8</span>.<span class="number">5</span>.<span class="number">32</span></span><br></pre></td></tr></table></figure>

<p>测试网络连同性</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec tomcat-net1 <span class="built_in">ping</span> tomcat-net2</span><br><span class="line"><span class="built_in">PING</span> tomcat-net2 (<span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">3</span>) <span class="number">56</span>(<span class="number">84</span>) bytes of data.</span><br><span class="line"><span class="number">64</span> bytes from tomcat-net2.mynet (<span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">3</span>): icmp_seq=<span class="number">1</span> ttl=<span class="number">64</span> <span class="built_in">time</span>=<span class="number">0</span>.<span class="number">267</span> ms</span><br><span class="line"><span class="number">64</span> bytes from tomcat-net2.mynet (<span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">3</span>): icmp_seq=<span class="number">2</span> ttl=<span class="number">64</span> <span class="built_in">time</span>=<span class="number">0</span>.<span class="number">204</span> ms</span><br><span class="line"></span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec tomcat-net2 <span class="built_in">ping</span> tomcat-net1</span><br><span class="line"><span class="built_in">PING</span> tomcat-net1 (<span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">2</span>) <span class="number">56</span>(<span class="number">84</span>) bytes of data.</span><br><span class="line"><span class="number">64</span> bytes from tomcat-net1.mynet (<span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">2</span>): icmp_seq=<span class="number">1</span> ttl=<span class="number">64</span> <span class="built_in">time</span>=<span class="number">0</span>.<span class="number">328</span> ms</span><br><span class="line"><span class="number">64</span> bytes from tomcat-net1.mynet (<span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">2</span>): icmp_seq=<span class="number">2</span> ttl=<span class="number">64</span> <span class="built_in">time</span>=<span class="number">0</span>.<span class="number">182</span> ms</span><br></pre></td></tr></table></figure>

<p>注：使用自定义的网络的容器之间是互通的</p>
<h3 id="使不同的网络之间互通-docker-network-connect-lt-network-gt-lt-container-gt"><a href="#使不同的网络之间互通-docker-network-connect-lt-network-gt-lt-container-gt" class="headerlink" title="使不同的网络之间互通 docker network connect &lt;network&gt; &lt;container&gt;"></a>使不同的网络之间互通 <code>docker network connect &lt;network&gt; &lt;container&gt;</code></h3><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker network connect --<span class="built_in">help</span></span><br><span class="line"></span><br><span class="line"><span class="function">Usage:  <span class="title">docker</span> <span class="title">network</span> <span class="title">connect</span> [<span class="title">OPTIONS</span>] <span class="title">NETWORK</span> <span class="title">CONTAINER</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Connect</span> <span class="title">a</span> <span class="title">container</span> <span class="title">to</span> <span class="title">a</span> <span class="title">network</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">      --<span class="title">alias</span> <span class="title">strings</span>           <span class="title">Add</span> <span class="title">network</span>-<span class="title">scoped</span> <span class="title">alias</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">driver</span>-<span class="title">opt</span> <span class="title">strings</span>      <span class="title">driver</span> <span class="title">options</span> <span class="title">for</span> <span class="title">the</span> <span class="title">network</span></span></span><br><span class="line"><span class="function">      --<span class="title">ip</span> <span class="title">string</span>               <span class="title">IPv4</span> <span class="title">address</span> (<span class="title">e.g</span>., 172.30.100.104)</span></span><br><span class="line"><span class="function">      --<span class="title">ip6</span> <span class="title">string</span>              <span class="title">IPv6</span> <span class="title">address</span> (<span class="title">e.g</span>., 2001:<span class="title">db8</span>::33)</span></span><br><span class="line"><span class="function">      --<span class="title">link</span> <span class="title">list</span>               <span class="title">Add</span> <span class="title">link</span> <span class="title">to</span> <span class="title">another</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">      --<span class="title">link</span>-<span class="title">local</span>-<span class="title">ip</span> <span class="title">strings</span>   <span class="title">Add</span> <span class="title">a</span> <span class="title">link</span>-<span class="title">local</span> <span class="title">address</span> <span class="title">for</span> <span class="title">the</span> <span class="title">container</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># 初始时无法<span class="built_in">ping</span>通</span><br><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec tomcat3 <span class="built_in">ping</span> tomcat-net1</span><br><span class="line"><span class="function">ping: <span class="title">tomcat</span>-<span class="title">net1</span>: <span class="title">Name</span> <span class="title">or</span> <span class="title">service</span> <span class="title">not</span> <span class="title">known</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># 设置网络互通</span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">i</span>-6<span class="title">x8256ap</span> ~]# <span class="title">docker</span> <span class="title">network</span> <span class="title">connect</span> <span class="title">mynet</span> <span class="title">tomcat3</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"># 测试已经<span class="title">ok</span></span></span><br><span class="line"><span class="function">[<span class="title">root</span>@<span class="title">i</span>-6<span class="title">x8256ap</span> ~]# <span class="title">docker</span> <span class="title">exec</span> <span class="title">tomcat3</span> <span class="title">ping</span> <span class="title">tomcat</span>-<span class="title">net1</span></span></span><br><span class="line"><span class="function"><span class="title">PING</span> <span class="title">tomcat</span>-<span class="title">net1</span> (192.168.0.2) 56(84) <span class="title">bytes</span> <span class="title">of</span> <span class="title">data</span>.</span></span><br><span class="line"><span class="function">64 <span class="title">bytes</span> <span class="title">from</span> <span class="title">tomcat</span>-<span class="title">net1.mynet</span> (192.168.0.2): <span class="title">icmp_seq</span>=1 <span class="title">ttl</span>=64 <span class="title">time</span>=0.416 <span class="title">ms</span></span></span><br><span class="line"><span class="function">64 <span class="title">bytes</span> <span class="title">from</span> <span class="title">tomcat</span>-<span class="title">net1.mynet</span> (192.168.0.2): <span class="title">icmp_seq</span>=2 <span class="title">ttl</span>=64 <span class="title">time</span>=0.195 <span class="title">ms</span></span></span><br></pre></td></tr></table></figure>

<p>注：<code>docker network connect</code>直接将tomcat3 新增了一个网卡</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker exec tomcat3 ip addr</span><br><span class="line"><span class="number">1</span>: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu <span class="number">65536</span> qdisc noqueue state UNKNOWN group default qlen <span class="number">1000</span></span><br><span class="line">    link/loopback <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> brd <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span></span><br><span class="line">    inet <span class="number">127</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">1</span>/<span class="number">8</span> scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">52</span>: eth0@if53: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    link/ether <span class="number">02</span>:<span class="number">42</span>:ac:<span class="number">11</span>:<span class="number">00</span>:<span class="number">04</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br><span class="line">    inet <span class="number">172</span>.<span class="number">17</span>.<span class="number">0</span>.<span class="number">4</span>/<span class="number">16</span> brd <span class="number">172</span>.<span class="number">17</span>.<span class="number">255</span>.<span class="number">255</span> scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line"><span class="number">61</span>: eth1@if62: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu <span class="number">1500</span> qdisc noqueue state UP group default</span><br><span class="line">    link/ether <span class="number">02</span>:<span class="number">42</span>:c0:a8:<span class="number">00</span>:<span class="number">04</span> brd ff:ff:ff:ff:ff:ff link-netnsid <span class="number">0</span></span><br><span class="line">    inet <span class="number">192</span>.<span class="number">168</span>.<span class="number">0</span>.<span class="number">4</span>/<span class="number">16</span> brd <span class="number">192</span>.<span class="number">168</span>.<span class="number">255</span>.<span class="number">255</span> scope global eth1</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure>

<h2 id="Docker-Compose"><a href="#Docker-Compose" class="headerlink" title="Docker Compose"></a>Docker Compose</h2><h3 id="Compose-简介"><a href="#Compose-简介" class="headerlink" title="Compose 简介"></a>Compose 简介</h3><p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。</p>
<p>Compose 使用的三个步骤：</p>
<ul>
<li>使用 Dockerfile 定义应用程序的环境。</li>
<li>使用 docker-compose.yml 定义构成应用程序的服务，这样它们可以在隔离环境中一起运行。</li>
<li>最后，执行 docker-compose up 命令来启动并运行整个应用程序。</li>
</ul>
<h3 id="Compose-安装"><a href="#Compose-安装" class="headerlink" title="Compose 安装"></a>Compose 安装</h3><ul>
<li><p>从github上下载docker-compose二进制文件安装</p>
<p>Linux 上我们可以从 Github 上下载它的二进制包来使用，最新发行的版本地址：<a href="https://github.com/docker/compose/releases" target="_blank" rel="noopener">https://github.com/docker/compose/releases</a>。</p>
<p>运行以下命令以下载 Docker Compose 的当前稳定版本：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo curl -L "https://github.com/docker/compose/releases/download/<span class="number">1</span>.<span class="number">27</span>.<span class="number">4</span>/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>要安装其他版本的 Compose，请替换 1.27.4。</p>
<p>将可执行权限应用于二进制文件：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo chmod +x /usr/local/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>创建软链：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose</span><br></pre></td></tr></table></figure>

<p>测试是否安装成功：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker-compose --version</span><br><span class="line">cker-compose version <span class="number">1</span>.<span class="number">27</span>.<span class="number">4</span>, build <span class="number">4667896</span>b</span><br></pre></td></tr></table></figure>
</li>
<li><p>pip安装</p>
 <figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># sudo pip install docker-compose</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Compose-示例"><a href="#Compose-示例" class="headerlink" title="Compose 示例"></a>Compose 示例</h3><p>参考：<a href="https://blog.csdn.net/pushiqiang/article/details/78682323" target="_blank" rel="noopener">docker-compose教程（安装，使用, 快速入门）</a></p>
<h3 id="Compose-命令参数"><a href="#Compose-命令参数" class="headerlink" title="Compose 命令参数"></a>Compose 命令参数</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker-compose --<span class="built_in">help</span></span><br><span class="line">Define and run multi-container applications with Docker.</span><br><span class="line"></span><br><span class="line"><span class="function">Usage:</span></span><br><span class="line"><span class="function">  <span class="title">docker</span>-<span class="title">compose</span> [-<span class="title">f</span> &lt;<span class="title">arg</span>&gt;...] [<span class="title">options</span>] [--] [<span class="title">COMMAND</span>] [<span class="title">ARGS</span>...]</span></span><br><span class="line"><span class="function">  <span class="title">docker</span>-<span class="title">compose</span> -<span class="title">h</span>|--<span class="title">help</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  -<span class="title">f</span>, --<span class="title">file</span> <span class="title">FILE</span>             <span class="title">Specify</span> <span class="title">an</span> <span class="title">alternate</span> <span class="title">compose</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">                              (<span class="title">default</span>: <span class="title">docker</span>-<span class="title">compose.yml</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">p</span>, --<span class="title">project</span>-<span class="title">name</span> <span class="title">NAME</span>     <span class="title">Specify</span> <span class="title">an</span> <span class="title">alternate</span> <span class="title">project</span> <span class="title">name</span></span></span><br><span class="line"><span class="function">                              (<span class="title">default</span>: <span class="title">directory</span> <span class="title">name</span>)</span></span><br><span class="line"><span class="function">  -<span class="title">c</span>, --<span class="title">context</span> <span class="title">NAME</span>          <span class="title">Specify</span> <span class="title">a</span> <span class="title">context</span> <span class="title">name</span></span></span><br><span class="line"><span class="function">  --<span class="title">verbose</span>                   <span class="title">Show</span> <span class="title">more</span> <span class="title">output</span></span></span><br><span class="line"><span class="function">  --<span class="title">log</span>-<span class="title">level</span> <span class="title">LEVEL</span>           <span class="title">Set</span> <span class="title">log</span> <span class="title">level</span> (<span class="title">DEBUG</span>, <span class="title">INFO</span>, <span class="title">WARNING</span>, <span class="title">ERROR</span>, <span class="title">CRITICAL</span>)</span></span><br><span class="line"><span class="function">  --<span class="title">no</span>-<span class="title">ansi</span>                   <span class="title">Do</span> <span class="title">not</span> <span class="title">print</span> <span class="title">ANSI</span> <span class="title">control</span> <span class="title">characters</span></span></span><br><span class="line"><span class="function">  -<span class="title">v</span>, --<span class="title">version</span>               <span class="title">Print</span> <span class="title">version</span> <span class="title">and</span> <span class="title">exit</span></span></span><br><span class="line"><span class="function">  -<span class="title">H</span>, --<span class="title">host</span> <span class="title">HOST</span>             <span class="title">Daemon</span> <span class="title">socket</span> <span class="title">to</span> <span class="title">connect</span> <span class="title">to</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">  --<span class="title">tls</span>                       <span class="title">Use</span> <span class="title">TLS</span>; <span class="title">implied</span> <span class="title">by</span> --<span class="title">tlsverify</span></span></span><br><span class="line"><span class="function">  --<span class="title">tlscacert</span> <span class="title">CA_PATH</span>         <span class="title">Trust</span> <span class="title">certs</span> <span class="title">signed</span> <span class="title">only</span> <span class="title">by</span> <span class="title">this</span> <span class="title">CA</span></span></span><br><span class="line"><span class="function">  --<span class="title">tlscert</span> <span class="title">CLIENT_CERT_PATH</span>  <span class="title">Path</span> <span class="title">to</span> <span class="title">TLS</span> <span class="title">certificate</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">  --<span class="title">tlskey</span> <span class="title">TLS_KEY_PATH</span>       <span class="title">Path</span> <span class="title">to</span> <span class="title">TLS</span> <span class="title">key</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">  --<span class="title">tlsverify</span>                 <span class="title">Use</span> <span class="title">TLS</span> <span class="title">and</span> <span class="title">verify</span> <span class="title">the</span> <span class="title">remote</span></span></span><br><span class="line"><span class="function">  --<span class="title">skip</span>-<span class="title">hostname</span>-<span class="title">check</span>       <span class="title">Don</span>'<span class="title">t</span> <span class="title">check</span> <span class="title">the</span> <span class="title">daemon</span>'<span class="title">s</span> <span class="title">hostname</span> <span class="title">against</span> <span class="title">the</span></span></span><br><span class="line"><span class="function">                              <span class="title">name</span> <span class="title">specified</span> <span class="title">in</span> <span class="title">the</span> <span class="title">client</span> <span class="title">certificate</span></span></span><br><span class="line"><span class="function">  --<span class="title">project</span>-<span class="title">directory</span> <span class="title">PATH</span>    <span class="title">Specify</span> <span class="title">an</span> <span class="title">alternate</span> <span class="title">working</span> <span class="title">directory</span></span></span><br><span class="line"><span class="function">                              (<span class="title">default</span>: <span class="title">the</span> <span class="title">path</span> <span class="title">of</span> <span class="title">the</span> <span class="title">Compose</span> <span class="title">file</span>)</span></span><br><span class="line"><span class="function">  --<span class="title">compatibility</span>             <span class="title">If</span> <span class="title">set</span>, <span class="title">Compose</span> <span class="title">will</span> <span class="title">attempt</span> <span class="title">to</span> <span class="title">convert</span> <span class="title">keys</span></span></span><br><span class="line"><span class="function">                              <span class="title">in</span> <span class="title">v3</span> <span class="title">files</span> <span class="title">to</span> <span class="title">their</span> <span class="title">non</span>-<span class="title">Swarm</span> <span class="title">equivalent</span> (<span class="title">DEPRECATED</span>)</span></span><br><span class="line"><span class="function">  --<span class="title">env</span>-<span class="title">file</span> <span class="title">PATH</span>             <span class="title">Specify</span> <span class="title">an</span> <span class="title">alternate</span> <span class="title">environment</span> <span class="title">file</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">build</span>              <span class="title">Build</span> <span class="title">or</span> <span class="title">rebuild</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">config</span>             <span class="title">Validate</span> <span class="title">and</span> <span class="title">view</span> <span class="title">the</span> <span class="title">Compose</span> <span class="title">file</span></span></span><br><span class="line"><span class="function">  <span class="title">create</span>             <span class="title">Create</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">down</span>               <span class="title">Stop</span> <span class="title">and</span> <span class="title">remove</span> <span class="title">containers</span>, <span class="title">networks</span>, <span class="title">images</span>, <span class="title">and</span> <span class="title">volumes</span></span></span><br><span class="line"><span class="function">  <span class="title">events</span>             <span class="title">Receive</span> <span class="title">real</span> <span class="title">time</span> <span class="title">events</span> <span class="title">from</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">exec</span>               <span class="title">Execute</span> <span class="title">a</span> <span class="title">command</span> <span class="title">in</span> <span class="title">a</span> <span class="title">running</span> <span class="title">container</span></span></span><br><span class="line"><span class="function">  <span class="title">help</span>               <span class="title">Get</span> <span class="title">help</span> <span class="title">on</span> <span class="title">a</span> <span class="title">command</span></span></span><br><span class="line"><span class="function">  <span class="title">images</span>             <span class="title">List</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">kill</span>               <span class="title">Kill</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">logs</span>               <span class="title">View</span> <span class="title">output</span> <span class="title">from</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">pause</span>              <span class="title">Pause</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">port</span>               <span class="title">Print</span> <span class="title">the</span> <span class="title">public</span> <span class="title">port</span> <span class="title">for</span> <span class="title">a</span> <span class="title">port</span> <span class="title">binding</span></span></span><br><span class="line"><span class="function">  <span class="title">ps</span>                 <span class="title">List</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">pull</span>               <span class="title">Pull</span> <span class="title">service</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">push</span>               <span class="title">Push</span> <span class="title">service</span> <span class="title">images</span></span></span><br><span class="line"><span class="function">  <span class="title">restart</span>            <span class="title">Restart</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">rm</span>                 <span class="title">Remove</span> <span class="title">stopped</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">run</span>                <span class="title">Run</span> <span class="title">a</span> <span class="title">one</span>-<span class="title">off</span> <span class="title">command</span></span></span><br><span class="line"><span class="function">  <span class="title">scale</span>              <span class="title">Set</span> <span class="title">number</span> <span class="title">of</span> <span class="title">containers</span> <span class="title">for</span> <span class="title">a</span> <span class="title">service</span></span></span><br><span class="line"><span class="function">  <span class="title">start</span>              <span class="title">Start</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">stop</span>               <span class="title">Stop</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">top</span>                <span class="title">Display</span> <span class="title">the</span> <span class="title">running</span> <span class="title">processes</span></span></span><br><span class="line"><span class="function">  <span class="title">unpause</span>            <span class="title">Unpause</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">  <span class="title">up</span>                 <span class="title">Create</span> <span class="title">and</span> <span class="title">start</span> <span class="title">containers</span></span></span><br><span class="line"><span class="function">  <span class="title">version</span>            <span class="title">Show</span> <span class="title">version</span> <span class="title">information</span> <span class="title">and</span> <span class="title">quit</span></span></span><br></pre></td></tr></table></figure>

<p>注：Docker compose的使用非常类似于docker命令的使用，但是需要注意的是大部分的compose命令都需要到docker-compose.yml文件所在的目录下才能执行</p>
<h4 id="以守护进程模式运行加-d选项"><a href="#以守护进程模式运行加-d选项" class="headerlink" title="以守护进程模式运行加-d选项"></a>以守护进程模式运行加-d选项</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># docker-compose up -d</span><br></pre></td></tr></table></figure>

<h4 id="查看服务列表-docker-compose-ps"><a href="#查看服务列表-docker-compose-ps" class="headerlink" title="查看服务列表 docker-compose ps"></a>查看服务列表 <code>docker-compose ps</code></h4><ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap docker]# docker-compose ps -h</span><br><span class="line">List containers.</span><br><span class="line"></span><br><span class="line"><span class="function">Usage: <span class="title">ps</span> [<span class="title">options</span>] [--] [<span class="title">SERVICE</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">    -<span class="title">q</span>, --<span class="title">quiet</span>          <span class="title">Only</span> <span class="title">display</span> <span class="title">IDs</span></span></span><br><span class="line"><span class="function">    --<span class="title">services</span>           <span class="title">Display</span> <span class="title">services</span></span></span><br><span class="line"><span class="function">    --<span class="title">filter</span> <span class="title">KEY</span>=<span class="title">VAL</span>     <span class="title">Filter</span> <span class="title">services</span> <span class="title">by</span> <span class="title">a</span> <span class="title">property</span></span></span><br><span class="line"><span class="function">    -<span class="title">a</span>, --<span class="title">all</span>            <span class="title">Show</span> <span class="title">all</span> <span class="title">stopped</span> <span class="title">containers</span> (<span class="title">including</span> <span class="title">those</span> <span class="title">created</span> <span class="title">by</span> <span class="title">the</span> <span class="title">run</span> <span class="title">command</span>)</span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap docker]# docker-compose ps -a</span><br><span class="line">     Name                   Command               State           Ports         </span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">docker_redis_1   docker-entrypoint.sh redis ...   Up      <span class="number">6379</span>/tcp              </span><br><span class="line">docker_web_1     python app.py                    Up      <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>:<span class="number">5000</span>-&gt;<span class="number">5000</span>/tcp</span><br></pre></td></tr></table></figure>

<h4 id="查看日志-docker-compose-logs-lt-sericeName-gt"><a href="#查看日志-docker-compose-logs-lt-sericeName-gt" class="headerlink" title="查看日志 docker-compose logs &lt;sericeName&gt;"></a>查看日志 <code>docker-compose logs &lt;sericeName&gt;</code></h4><ul>
<li>示例</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap docker]# docker-compose logs -t web</span><br></pre></td></tr></table></figure>

<ul>
<li>用法</li>
</ul>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap docker]# docker-compose logs -h</span><br><span class="line">View output from containers.</span><br><span class="line"></span><br><span class="line"><span class="function">Usage: <span class="title">logs</span> [<span class="title">options</span>] [--] [<span class="title">SERVICE</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">    --<span class="title">no</span>-<span class="title">color</span>          <span class="title">Produce</span> <span class="title">monochrome</span> <span class="title">output</span>.</span></span><br><span class="line"><span class="function">    -<span class="title">f</span>, --<span class="title">follow</span>        <span class="title">Follow</span> <span class="title">log</span> <span class="title">output</span>.</span></span><br><span class="line"><span class="function">    -<span class="title">t</span>, --<span class="title">timestamps</span>    <span class="title">Show</span> <span class="title">timestamps</span>.</span></span><br><span class="line"><span class="function">    --<span class="title">tail</span>="<span class="title">all</span>"        <span class="title">Number</span> <span class="title">of</span> <span class="title">lines</span> <span class="title">to</span> <span class="title">show</span> <span class="title">from</span> <span class="title">the</span> <span class="title">end</span> <span class="title">of</span> <span class="title">the</span> <span class="title">logs</span></span></span><br><span class="line"><span class="function">                        <span class="title">for</span> <span class="title">each</span> <span class="title">container</span>.</span></span><br></pre></td></tr></table></figure>

<h2 id="Docker-Machine"><a href="#Docker-Machine" class="headerlink" title="Docker Machine"></a>Docker Machine</h2><p>Docker Machine 是一种可以让您在虚拟主机上安装 Docker 的工具，并可以使用 docker-machine 命令来管理主机。</p>
<p>Docker Machine 也可以集中管理所有的 docker 主机，比如快速的给 100 台服务器安装上 docker。</p>
<p>Docker Machine 管理的虚拟主机可以是机上的，也可以是云供应商，如阿里云，腾讯云，AWS，或 DigitalOcean。</p>
<p>使用 docker-machine 命令，您可以启动，检查，停止和重新启动托管主机，也可以升级 Docker 客户端和守护程序，以及配置 Docker 客户端与您的主机进行通信。</p>
<h3 id="Machine-安装"><a href="#Machine-安装" class="headerlink" title="Machine 安装"></a>Machine 安装</h3><p>安装 Docker Machine 之前你需要先安装 Docker。</p>
<p>Docker Mechine 可以在多种平台上安装使用，包括 Linux 、MacOS 以及 windows。</p>
<h4 id="Linux-安装命令"><a href="#Linux-安装命令" class="headerlink" title="Linux 安装命令"></a>Linux 安装命令</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ base=https://github.com/docker/machine/releases/download/v0.<span class="number">16</span>.<span class="number">2</span> &amp;&amp;</span><br><span class="line">  curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/tmp/docker-machine &amp;&amp;</span><br><span class="line">  sudo mv /tmp/docker-machine /usr/local/bin/docker-machine &amp;&amp;</span><br><span class="line">  chmod +x /usr/local/bin/docker-machine</span><br></pre></td></tr></table></figure>

<h4 id="macOS-安装命令"><a href="#macOS-安装命令" class="headerlink" title="macOS 安装命令"></a>macOS 安装命令</h4><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ base=https://github.com/docker/machine/releases/download/v0.<span class="number">16</span>.<span class="number">2</span> &amp;&amp;</span><br><span class="line">  curl -L $base/docker-machine-$(uname -s)-$(uname -m) &gt;/usr/local/bin/docker-machine &amp;&amp;</span><br><span class="line">  chmod +x /usr/local/bin/docker-machine</span><br></pre></td></tr></table></figure>

<h4 id="Windows-安装命令"><a href="#Windows-安装命令" class="headerlink" title="Windows 安装命令"></a>Windows 安装命令</h4><p>如果你是 Windows 平台，可以使用 <a href="https://git-for-windows.github.io/" target="_blank" rel="noopener">Git BASH</a>，并输入以下命令：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ base=https://github.com/docker/machine/releases/download/v0.<span class="number">16</span>.<span class="number">02</span> &amp;&amp;</span><br><span class="line">  <span class="built_in">mkdir</span> -p "$HOME/bin" &amp;&amp;</span><br><span class="line">  curl -L $base/docker-machine-Windows-x86_64.exe &gt; "$HOME/bin/docker-machine.exe" &amp;&amp;</span><br><span class="line">  chmod +x "$HOME/bin/docker-machine.exe"</span><br></pre></td></tr></table></figure>

<p>查看是否安装成功：</p>
<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ docker-machine version</span><br><span class="line">docker-machine version <span class="number">0</span>.<span class="number">16</span>.<span class="number">0</span>, build <span class="number">9371605</span></span><br></pre></td></tr></table></figure>

<h3 id="Machine-命令参数"><a href="#Machine-命令参数" class="headerlink" title="Machine 命令参数"></a>Machine 命令参数</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">[root@i-<span class="number">6</span>x8256ap ~]# docker-machine -h</span><br><span class="line"><span class="function">Usage: <span class="title">docker</span>-<span class="title">machine</span> [<span class="title">OPTIONS</span>] <span class="title">COMMAND</span> [<span class="title">arg</span>...]</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Create</span> <span class="title">and</span> <span class="title">manage</span> <span class="title">machines</span> <span class="title">running</span> <span class="title">Docker</span>.</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Version</span>: 0.16.2, <span class="title">build</span> <span class="title">bd45ab13</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Author</span>:</span></span><br><span class="line"><span class="function">  <span class="title">Docker</span> <span class="title">Machine</span> <span class="title">Contributors</span> - &lt;<span class="title">https</span>://<span class="title">github.com</span>/<span class="title">docker</span>/<span class="title">machine</span>&gt;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Options</span>:</span></span><br><span class="line"><span class="function">  --<span class="title">debug</span>, -<span class="title">D</span>           <span class="title">Enable</span> <span class="title">debug</span> <span class="title">mode</span></span></span><br><span class="line"><span class="function">  --<span class="title">storage</span>-<span class="title">path</span>, -<span class="title">s</span> "/<span class="title">root</span>/.<span class="title">docker</span>/<span class="title">machine</span>"  <span class="title">Configures</span> <span class="title">storage</span> <span class="title">path</span> [$<span class="title">MACHINE_STORAGE_PATH</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">tls</span>-<span class="title">ca</span>-<span class="title">cert</span>         <span class="title">CA</span> <span class="title">to</span> <span class="title">verify</span> <span class="title">remotes</span> <span class="title">against</span> [$<span class="title">MACHINE_TLS_CA_CERT</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">tls</span>-<span class="title">ca</span>-<span class="title">key</span>          <span class="title">Private</span> <span class="title">key</span> <span class="title">to</span> <span class="title">generate</span> <span class="title">certificates</span> [$<span class="title">MACHINE_TLS_CA_KEY</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">tls</span>-<span class="title">client</span>-<span class="title">cert</span>     <span class="title">Client</span> <span class="title">cert</span> <span class="title">to</span> <span class="title">use</span> <span class="title">for</span> <span class="title">TLS</span> [$<span class="title">MACHINE_TLS_CLIENT_CERT</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">tls</span>-<span class="title">client</span>-<span class="title">key</span>      <span class="title">Private</span> <span class="title">key</span> <span class="title">used</span> <span class="title">in</span> <span class="title">client</span> <span class="title">TLS</span> <span class="title">auth</span> [$<span class="title">MACHINE_TLS_CLIENT_KEY</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">github</span>-<span class="title">api</span>-<span class="title">token</span>    <span class="title">Token</span> <span class="title">to</span> <span class="title">use</span> <span class="title">for</span> <span class="title">requests</span> <span class="title">to</span> <span class="title">the</span> <span class="title">Github</span> <span class="title">API</span> [$<span class="title">MACHINE_GITHUB_API_TOKEN</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">native</span>-<span class="title">ssh</span>          <span class="title">Use</span> <span class="title">the</span> <span class="title">native</span> (<span class="title">Go</span>-<span class="title">based</span>) <span class="title">SSH</span> <span class="title">implementation</span>. [$<span class="title">MACHINE_NATIVE_SSH</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">bugsnag</span>-<span class="title">api</span>-<span class="title">token</span>   <span class="title">BugSnag</span> <span class="title">API</span> <span class="title">token</span> <span class="title">for</span> <span class="title">crash</span> <span class="title">reporting</span> [$<span class="title">MACHINE_BUGSNAG_API_TOKEN</span>]</span></span><br><span class="line"><span class="function">  --<span class="title">help</span>, -<span class="title">h</span>            <span class="title">show</span> <span class="title">help</span></span></span><br><span class="line"><span class="function">  --<span class="title">version</span>, -<span class="title">v</span>         <span class="title">print</span> <span class="title">the</span> <span class="title">version</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Commands</span>:</span></span><br><span class="line"><span class="function">  <span class="title">active</span>              <span class="title">Print</span> <span class="title">which</span> <span class="title">machine</span> <span class="title">is</span> <span class="title">active</span></span></span><br><span class="line"><span class="function">  <span class="title">config</span>              <span class="title">Print</span> <span class="title">the</span> <span class="title">connection</span> <span class="title">config</span> <span class="title">for</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">create</span>              <span class="title">Create</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">env</span>                 <span class="title">Display</span> <span class="title">the</span> <span class="title">commands</span> <span class="title">to</span> <span class="title">set</span> <span class="title">up</span> <span class="title">the</span> <span class="title">environment</span> <span class="title">for</span> <span class="title">the</span> <span class="title">Docker</span> <span class="title">client</span></span></span><br><span class="line"><span class="function">  <span class="title">inspect</span>             <span class="title">Inspect</span> <span class="title">information</span> <span class="title">about</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">ip</span>                  <span class="title">Get</span> <span class="title">the</span> <span class="title">IP</span> <span class="title">address</span> <span class="title">of</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">kill</span>                <span class="title">Kill</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">ls</span>                  <span class="title">List</span> <span class="title">machines</span></span></span><br><span class="line"><span class="function">  <span class="title">provision</span>           <span class="title">Re</span>-<span class="title">provision</span> <span class="title">existing</span> <span class="title">machines</span></span></span><br><span class="line"><span class="function">  <span class="title">regenerate</span>-<span class="title">certs</span>    <span class="title">Regenerate</span> <span class="title">TLS</span> <span class="title">Certificates</span> <span class="title">for</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">restart</span>             <span class="title">Restart</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">rm</span>                  <span class="title">Remove</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">ssh</span>                 <span class="title">Log</span> <span class="title">into</span> <span class="title">or</span> <span class="title">run</span> <span class="title">a</span> <span class="title">command</span> <span class="title">on</span> <span class="title">a</span> <span class="title">machine</span> <span class="title">with</span> <span class="title">SSH</span>.</span></span><br><span class="line"><span class="function">  <span class="title">scp</span>                 <span class="title">Copy</span> <span class="title">files</span> <span class="title">between</span> <span class="title">machines</span></span></span><br><span class="line"><span class="function">  <span class="title">mount</span>               <span class="title">Mount</span> <span class="title">or</span> <span class="title">unmount</span> <span class="title">a</span> <span class="title">directory</span> <span class="title">from</span> <span class="title">a</span> <span class="title">machine</span> <span class="title">with</span> <span class="title">SSHFS</span>.</span></span><br><span class="line"><span class="function">  <span class="title">start</span>               <span class="title">Start</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">status</span>              <span class="title">Get</span> <span class="title">the</span> <span class="title">status</span> <span class="title">of</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">stop</span>                <span class="title">Stop</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">upgrade</span>             <span class="title">Upgrade</span> <span class="title">a</span> <span class="title">machine</span> <span class="title">to</span> <span class="title">the</span> <span class="title">latest</span> <span class="title">version</span> <span class="title">of</span> <span class="title">Docker</span></span></span><br><span class="line"><span class="function">  <span class="title">url</span>                 <span class="title">Get</span> <span class="title">the</span> <span class="title">URL</span> <span class="title">of</span> <span class="title">a</span> <span class="title">machine</span></span></span><br><span class="line"><span class="function">  <span class="title">version</span>             <span class="title">Show</span> <span class="title">the</span> <span class="title">Docker</span> <span class="title">Machine</span> <span class="title">version</span> <span class="title">or</span> <span class="title">a</span> <span class="title">machine</span> <span class="title">docker</span> <span class="title">version</span></span></span><br><span class="line"><span class="function">  <span class="title">help</span>                <span class="title">Shows</span> <span class="title">a</span> <span class="title">list</span> <span class="title">of</span> <span class="title">commands</span> <span class="title">or</span> <span class="title">help</span> <span class="title">for</span> <span class="title">one</span> <span class="title">command</span></span></span><br><span class="line"><span class="function">  </span></span><br><span class="line"><span class="function"><span class="title">Run</span> '<span class="title">docker</span>-<span class="title">machine</span> <span class="title">COMMAND</span> --<span class="title">help</span>' <span class="title">for</span> <span class="title">more</span> <span class="title">information</span> <span class="title">on</span> <span class="title">a</span> <span class="title">command</span>.</span></span><br></pre></td></tr></table></figure>

<h2 id="Docker-可视化工具"><a href="#Docker-可视化工具" class="headerlink" title="Docker 可视化工具"></a>Docker 可视化工具</h2><h3 id="portainer安装"><a href="#portainer安装" class="headerlink" title="portainer安装"></a>portainer安装</h3><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p <span class="number">8088</span>:<span class="number">9000</span> --restart always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span><br></pre></td></tr></table></figure>

<p>登录：<a href="http://103.21.118.193:8088" target="_blank" rel="noopener">http://103.21.118.193:8088</a></p>
<h2 id="本地镜像发布到阿里云"><a href="#本地镜像发布到阿里云" class="headerlink" title="本地镜像发布到阿里云"></a>本地镜像发布到阿里云</h2><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://blog.csdn.net/u011936655/article/details/81147315" target="_blank" rel="noopener">从零开始，使用Docker Swarm部署集群教程</a></p>

      
    </div>

    

    
      
    

    
    
    

    

    
      
    
    

    
      <div>
        




  



<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Mr Wang</li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    
    <a href="https://forgetst.github.io/docker/docker-学习笔记.html" title="docker 学习笔记">https://forgetst.github.io/docker/docker-学习笔记.html</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li>
</ul>

      </div>
    

    <div>
      
        <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>

      
    </div>

    <footer class="post-footer">
      
        
          
        
        <div class="post-tags">
          
            <a href="/tags/docker/" rel="tag"><i class="fa fa-tag"></i> docker</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/web/npm/npm-install-安装依赖无反应.html" rel="next" title="npm install 安装依赖无反应">
                <i class="fa fa-chevron-left"></i> npm install 安装依赖无反应
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/docker/docker-异常记录.html" rel="prev" title="docker 异常记录">
                docker 异常记录 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  
    <img class="site-author-image" itemprop="image" src="/images/profile.jpg" alt="Mr Wang">
  
  <p class="site-author-name" itemprop="name">Mr Wang</p>
  <div class="site-description motion-element" itemprop="description">行动了才会有故事，说出来才会有结果。</div>
</div>


  <nav class="site-state motion-element">
    
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">153</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    

    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">59</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    

    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">44</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>



  <div class="feed-link motion-element">
    <a href="/atom.xml" rel="alternate">
      <i class="fa fa-rss"></i>RSS
    </a>
  </div>





  <div class="links-of-author motion-element">
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/forgetST" title="GitHub &rarr; https://github.com/forgetST" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:yourname@gmail.com" title="E-Mail &rarr; mailto:yourname@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://weibo.com/yourname" title="Weibo &rarr; https://weibo.com/yourname" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
      </span>
    
  </div>







          
          
        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker简介"><span class="nav-number">1.</span> <span class="nav-text">Docker简介</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker架构"><span class="nav-number">2.</span> <span class="nav-text">Docker架构</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-安装"><span class="nav-number">3.</span> <span class="nav-text">Docker 安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker常用命令"><span class="nav-number">4.</span> <span class="nav-text">Docker常用命令</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#镜像相关的命令"><span class="nav-number">4.1.</span> <span class="nav-text">镜像相关的命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建镜像-docker-build-t-lt-imageName-tag-gt-f-path-to-dockerfile"><span class="nav-number">4.1.1.</span> <span class="nav-text">创建镜像 docker build -t &lt;imageName:tag&gt; -f /path/to/dockerfile .</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看镜像列表-docker-images"><span class="nav-number">4.1.2.</span> <span class="nav-text">查看镜像列表  docker images</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#搜索镜像-docker-search-lt-镜像名字-gt"><span class="nav-number">4.1.3.</span> <span class="nav-text">搜索镜像 docker search &lt;镜像名字&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#拉取镜像-docker-pull-lt-镜像名字-gt"><span class="nav-number">4.1.4.</span> <span class="nav-text">拉取镜像  docker pull &lt;镜像名字&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除镜像：docker-rmi-lt-镜像名字-gt"><span class="nav-number">4.1.5.</span> <span class="nav-text">删除镜像：docker rmi &lt;镜像名字&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#提交信息到镜像-docker-commit"><span class="nav-number">4.1.6.</span> <span class="nav-text">提交信息到镜像 docker commit</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导出镜像-docker-save-o-name-tar-lt-imageID-gt"><span class="nav-number">4.1.7.</span> <span class="nav-text">导出镜像 docker save -o name.tar &lt;imageID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#导入镜像-docker-load-i-lt-镜像tar包-gt"><span class="nav-number">4.1.8.</span> <span class="nav-text">导入镜像 docker load -i &lt;镜像tar包&gt;</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#容器相关的命令"><span class="nav-number">4.2.</span> <span class="nav-text">容器相关的命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建并启动容器-docker-run"><span class="nav-number">4.2.1.</span> <span class="nav-text">创建并启动容器  docker run</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看docker-进程-dcoker-ps"><span class="nav-number">4.2.2.</span> <span class="nav-text">查看docker 进程 dcoker ps</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#退出容器"><span class="nav-number">4.2.3.</span> <span class="nav-text">退出容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重启容器-docker-restart-lt-容器ID-gt"><span class="nav-number">4.2.4.</span> <span class="nav-text">重启容器  docker restart &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#停止容器-docker-stop-lt-容器ID-gt"><span class="nav-number">4.2.5.</span> <span class="nav-text">停止容器  docker stop &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#杀掉容器-docker-kill-lt-容器ID-gt"><span class="nav-number">4.2.6.</span> <span class="nav-text">杀掉容器 docker kill &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除容器-docker-rm-lt-容器-ID-gt"><span class="nav-number">4.2.7.</span> <span class="nav-text">删除容器 docker rm &lt;容器:ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#以守护进程启动容器"><span class="nav-number">4.2.8.</span> <span class="nav-text">以守护进程启动容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看容器内的进程-docker-top-lt-容器ID-gt"><span class="nav-number">4.2.9.</span> <span class="nav-text">查看容器内的进程  docker top &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看容器日志-docker-logs-ft-lt-容器ID-gt"><span class="nav-number">4.2.10.</span> <span class="nav-text">查看容器日志  docker logs -ft &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看容器内的细节-docker-inspect-lt-容器ID-gt"><span class="nav-number">4.2.11.</span> <span class="nav-text">查看容器内的细节 docker inspect &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#进入容器"><span class="nav-number">4.2.12.</span> <span class="nav-text">进入容器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#docker-attach-lt-容器ID-gt"><span class="nav-number">4.2.12.1.</span> <span class="nav-text">docker attach &lt;容器ID&gt;</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#docker-exec-t-lt-容器ID-gt-lt-cmd-gt"><span class="nav-number">4.2.12.2.</span> <span class="nav-text">docker exec -t &lt;容器ID&gt; &lt;cmd&gt;</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#copy容器内的数据到本地"><span class="nav-number">4.2.13.</span> <span class="nav-text">copy容器内的数据到本地</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker-网络命令-docker-network-lt-opts-gt"><span class="nav-number">4.3.</span> <span class="nav-text">Docker 网络命令 docker network &lt;opts&gt;</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#查看network列表-docker-network-ls"><span class="nav-number">4.3.1.</span> <span class="nav-text">查看network列表 docker network ls</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看network详情-docker-network-inspect-lt-networkID-gt"><span class="nav-number">4.3.2.</span> <span class="nav-text">查看network详情 docker network inspect &lt;networkID&gt;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker镜像"><span class="nav-number">5.</span> <span class="nav-text">Docker镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker联合文件系统Union-File-System"><span class="nav-number">5.1.</span> <span class="nav-text">Docker联合文件系统Union File System</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker镜像加载原理"><span class="nav-number">5.2.</span> <span class="nav-text">Docker镜像加载原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker容器数据卷"><span class="nav-number">6.</span> <span class="nav-text">Docker容器数据卷</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据卷（Data-Volumes）"><span class="nav-number">6.1.</span> <span class="nav-text">数据卷（Data Volumes）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据卷容器（Data-Volume-Containers）"><span class="nav-number">6.2.</span> <span class="nav-text">数据卷容器（Data Volume Containers）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DockerFile解析"><span class="nav-number">7.</span> <span class="nav-text">DockerFile解析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile内容基本知识"><span class="nav-number">7.1.</span> <span class="nav-text">DockerFile内容基本知识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile执行的流程"><span class="nav-number">7.2.</span> <span class="nav-text">DockerFile执行的流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DockerFile中的关键字"><span class="nav-number">7.3.</span> <span class="nav-text">DockerFile中的关键字</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-常用安装"><span class="nav-number">8.</span> <span class="nav-text">Docker 常用安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-网络"><span class="nav-number">9.</span> <span class="nav-text">Docker 网络</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Docker-网络模式"><span class="nav-number">9.1.</span> <span class="nav-text">Docker 网络模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看网络列表-docker-network-ls"><span class="nav-number">9.2.</span> <span class="nav-text">查看网络列表 docker network ls</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看网络详情-docker-network-inspect-lt-networkID-gt"><span class="nav-number">9.3.</span> <span class="nav-text">查看网络详情 docker network inspect &lt;networkID&gt;</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建网络-docker-network-create-opts"><span class="nav-number">9.4.</span> <span class="nav-text">创建网络 docker network create [opts]</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使不同的网络之间互通-docker-network-connect-lt-network-gt-lt-container-gt"><span class="nav-number">9.5.</span> <span class="nav-text">使不同的网络之间互通 docker network connect &lt;network&gt; &lt;container&gt;</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-Compose"><span class="nav-number">10.</span> <span class="nav-text">Docker Compose</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Compose-简介"><span class="nav-number">10.1.</span> <span class="nav-text">Compose 简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Compose-安装"><span class="nav-number">10.2.</span> <span class="nav-text">Compose 安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Compose-示例"><span class="nav-number">10.3.</span> <span class="nav-text">Compose 示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Compose-命令参数"><span class="nav-number">10.4.</span> <span class="nav-text">Compose 命令参数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#以守护进程模式运行加-d选项"><span class="nav-number">10.4.1.</span> <span class="nav-text">以守护进程模式运行加-d选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看服务列表-docker-compose-ps"><span class="nav-number">10.4.2.</span> <span class="nav-text">查看服务列表 docker-compose ps</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查看日志-docker-compose-logs-lt-sericeName-gt"><span class="nav-number">10.4.3.</span> <span class="nav-text">查看日志 docker-compose logs &lt;sericeName&gt;</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-Machine"><span class="nav-number">11.</span> <span class="nav-text">Docker Machine</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Machine-安装"><span class="nav-number">11.1.</span> <span class="nav-text">Machine 安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux-安装命令"><span class="nav-number">11.1.1.</span> <span class="nav-text">Linux 安装命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#macOS-安装命令"><span class="nav-number">11.1.2.</span> <span class="nav-text">macOS 安装命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Windows-安装命令"><span class="nav-number">11.1.3.</span> <span class="nav-text">Windows 安装命令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Machine-命令参数"><span class="nav-number">11.2.</span> <span class="nav-text">Machine 命令参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Docker-可视化工具"><span class="nav-number">12.</span> <span class="nav-text">Docker 可视化工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#portainer安装"><span class="nav-number">12.1.</span> <span class="nav-text">portainer安装</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#本地镜像发布到阿里云"><span class="nav-number">13.</span> <span class="nav-text">本地镜像发布到阿里云</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参考"><span class="nav-number">14.</span> <span class="nav-text">参考</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      
      
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>
</div>


        
      </main></div>
    

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2022</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr Wang</span>

  

  
</div>










  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
  <span class="post-meta-divider">|</span>
  <span id="busuanzi_container_site_uv">总访客数<span id="busuanzi_value_site_uv"></span>人</span>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    
  

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>










  
  













  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>




  <script src="/js/utils.js?v=7.2.0"></script>

  <script src="/js/motion.js?v=7.2.0"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.2.0"></script>




  
  <script src="/js/scrollspy.js?v=7.2.0"></script>
<script src="/js/post-details.js?v=7.2.0"></script>



  <script src="/js/next-boot.js?v=7.2.0"></script>

  

  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  


  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/01/assets/haru01.model.json"},"display":{"position":"right","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>



<!-- 页面点击小红心 -->
<script type="text/javascript" src="/js/src/clicklove.js"></script>

</html>


